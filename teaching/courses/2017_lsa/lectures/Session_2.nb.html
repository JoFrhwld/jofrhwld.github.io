<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.557">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Josef Fruehwald">

<title>Josef Fruehwald - Data and Data Frames</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../../">
<link href="../../../../assets/logo.svg" rel="icon" type="image/svg+xml">
<script src="../../../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../../../site_libs/quarto-contrib/codenamelabel/codeblocklabel.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-C00S3NPL7B"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-C00S3NPL7B', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../../index.html">
    <span class="navbar-title">Josef Fruehwald</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../research/index.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../software/index.html"> 
<span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../../../teaching/index.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../../../teaching/courses/2017_lsa/index.html" aria-current="page"> 
<span class="menu-text">LSA 2017 Course</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://jofrhwld.github.io/blog/"> <i class="bi bi-newspaper" role="img">
</i> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/jofrhwld.bsky.social"> <i class="bi bi-clouds" role="img">
</i> 
<span class="menu-text">bsky</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JoFrhwld"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../../teaching/courses/2017_lsa/lectures/Session_1.nb.html">Lectures</a></li><li class="breadcrumb-item"><a href="../../../../teaching/courses/2017_lsa/lectures/Session_2.nb.html">Data and Data Frames</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../teaching/courses/2017_lsa/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LSA 2017 Statistical Modelling with R</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Lectures</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../teaching/courses/2017_lsa/lectures/Session_1.nb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../../teaching/courses/2017_lsa/lectures/Session_2.nb.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data and Data Frames</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-agenda" id="toc-the-agenda" class="nav-link active" data-scroll-target="#the-agenda">The Agenda</a>
  <ul class="collapse">
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  </ul></li>
  <li><a href="#data-collection-and-storage" id="toc-data-collection-and-storage" class="nav-link" data-scroll-target="#data-collection-and-storage">Data Collection and Storage</a>
  <ul class="collapse">
  <li><a href="#general-principles-of-data-collection" id="toc-general-principles-of-data-collection" class="nav-link" data-scroll-target="#general-principles-of-data-collection">General Principles of Data Collection</a>
  <ul class="collapse">
  <li><a href="#over-collect-for-some-things" id="toc-over-collect-for-some-things" class="nav-link" data-scroll-target="#over-collect-for-some-things">Over-collect (for some things)</a></li>
  <li><a href="#preserve-hid-info" id="toc-preserve-hid-info" class="nav-link" data-scroll-target="#preserve-hid-info">Preserve HiD Info</a></li>
  <li><a href="#leave-a-trail-of-crumbs" id="toc-leave-a-trail-of-crumbs" class="nav-link" data-scroll-target="#leave-a-trail-of-crumbs">Leave A Trail of Crumbs</a></li>
  <li><a href="#give-meaningful-names" id="toc-give-meaningful-names" class="nav-link" data-scroll-target="#give-meaningful-names">Give Meaningful Names</a></li>
  <li><a href="#distinguish-between-0-and-na" id="toc-distinguish-between-0-and-na" class="nav-link" data-scroll-target="#distinguish-between-0-and-na">Distinguish between <code>0</code> and <code>NA</code></a></li>
  </ul></li>
  <li><a href="#storing-data" id="toc-storing-data" class="nav-link" data-scroll-target="#storing-data">Storing Data</a></li>
  </ul></li>
  <li><a href="#structuring-data" id="toc-structuring-data" class="nav-link" data-scroll-target="#structuring-data">Structuring Data</a>
  <ul class="collapse">
  <li><a href="#breaking-bad-spreadsheet-habits" id="toc-breaking-bad-spreadsheet-habits" class="nav-link" data-scroll-target="#breaking-bad-spreadsheet-habits">Breaking Bad Spreadsheet Habits</a></li>
  <li><a href="#better-habits" id="toc-better-habits" class="nav-link" data-scroll-target="#better-habits">Better Habits</a>
  <ul class="collapse">
  <li><a href="#semantics-of-data-structure" id="toc-semantics-of-data-structure" class="nav-link" data-scroll-target="#semantics-of-data-structure">Semantics of Data Structure</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data Frames</a>
  <ul class="collapse">
  <li><a href="#finding-your-way-around" id="toc-finding-your-way-around" class="nav-link" data-scroll-target="#finding-your-way-around">Finding your way around</a></li>
  <li><a href="#indexing-data-frames" id="toc-indexing-data-frames" class="nav-link" data-scroll-target="#indexing-data-frames">Indexing Data Frames</a></li>
  </ul></li>
  <li><a href="#reading-data-into-r" id="toc-reading-data-into-r" class="nav-link" data-scroll-target="#reading-data-into-r">Reading Data into R</a></li>
  <li><a href="#cleaning-up-data" id="toc-cleaning-up-data" class="nav-link" data-scroll-target="#cleaning-up-data">Cleaning up data</a>
  <ul class="collapse">
  <li><a href="#gathering-columns" id="toc-gathering-columns" class="nav-link" data-scroll-target="#gathering-columns">Gathering Columns</a></li>
  <li><a href="#separating-columns" id="toc-separating-columns" class="nav-link" data-scroll-target="#separating-columns">Separating Columns</a></li>
  <li><a href="#spreading-columns" id="toc-spreading-columns" class="nav-link" data-scroll-target="#spreading-columns">Spreading columns</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../../teaching/courses/2017_lsa/lectures/Session_1.nb.html">Lectures</a></li><li class="breadcrumb-item"><a href="../../../../teaching/courses/2017_lsa/lectures/Session_2.nb.html">Data and Data Frames</a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Data and Data Frames</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Josef Fruehwald </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 2017</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">December 2023</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="the-agenda" class="level1">
<h1>The Agenda</h1>
<ul>
<li>Talk about organizing, structuring &amp; storing your data.</li>
<li>Review some important data input/output options in R.</li>
<li>Review about how data frames work in R.</li>
</ul>
<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
~2 minute setup
</div>
</div>
<div class="callout-body-container callout-body">
<p>Make sure that your current RStudio project is set to your course project. Create and save your R notebook for today (I would recommend <code>02_lecture.Rmd</code>). Clear the workspace of anything left over from last time with the menu options <code>Session &gt; Clear Workspace</code>.</p>
<p>Load the important packages for today’s work:</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lsa2017)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in library(lsa2017): there is no package called 'lsa2017'</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in library(tidyverse): there is no package called 'tidyverse'</code></pre>
</div>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="data-collection-and-storage" class="level1">
<h1>Data Collection and Storage</h1>
<section id="general-principles-of-data-collection" class="level2">
<h2 class="anchored" data-anchor-id="general-principles-of-data-collection">General Principles of Data Collection</h2>
<section id="over-collect-for-some-things" class="level3">
<h3 class="anchored" data-anchor-id="over-collect-for-some-things">Over-collect (for some things)</h3>
<p>When collecting data in the first place, over-collect if at all possible or ethical. The world is a very complex place, so there is no way you could cram it all into a bottle, but give it your best shot! If during the course of your data analysis, you find that it would have been really useful to have data on, say, duration, as well as formant frequencies, it becomes costly to recollect that data, especially if you haven’t laid the proper trail for yourself. On the other hand, <em>automation</em> of acoustic analysis or data processing can cut down on this costliness.</p>
<p>This doesn’t go for personal information on human subjects, though. It’s important from an ethics standpoint to ask for everything you’ll need, but not more. You don’t want to collect an enormous demographic profile on your participants if you won’t wind up using it, especially if you know you won’t use it to begin with.</p>
</section>
<section id="preserve-hid-info" class="level3">
<h3 class="anchored" data-anchor-id="preserve-hid-info">Preserve HiD Info</h3>
<p>If, for instance, you’re collecting data on the effect of voicing on preceding vowel duration, preserve high dimensional data coding, like Lexical Item, or the transcription of the following segment. These high dimensional codings probably won’t be too useful for your immediate analysis, but they will allow you to procedurally extract additional features from them at a later time. For example, if you have a column called <code>fol_seg</code>, which is just a transcription of the following segment, it is easy create a new column called <code>manner</code> with code that looks like this:</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(iy_ah<span class="sc">$</span>fol_seg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah' not found</code></pre>
</div>
</div>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>iy_ah <span class="ot">&lt;-</span> iy_ah <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">manner =</span> <span class="fu">recode</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>      fol_seg, </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">B =</span> <span class="st">'stop'</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">CH =</span> <span class="st">'affricate'</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">D =</span> <span class="st">'stop'</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">DH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">F</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">G =</span> <span class="st">'stop'</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">HH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">JH =</span> <span class="st">'affricate'</span>,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">K =</span> <span class="st">'stop'</span>,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">L =</span> <span class="st">'liquid'</span>,</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">M =</span> <span class="st">'nasal'</span>,</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">N =</span> <span class="st">'nasal'</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">NG =</span> <span class="st">'nasal'</span>,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">P =</span> <span class="st">'stop'</span>,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">R =</span> <span class="st">'liquid'</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">S =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">SH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>      <span class="at">SP =</span> <span class="st">'pause'</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">T</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'stop'</span>,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">TH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">V =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">W =</span> <span class="st">'glide'</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">Y =</span> <span class="st">'glide'</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">Z =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">ZH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">'vowel'</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in iy_ah %&gt;% mutate(manner = recode(fol_seg, B = "stop", CH = "affricate", : could not find function "%&gt;%"</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(iy_ah<span class="sc">$</span>manner)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah' not found</code></pre>
</div>
</div>
</section>
<section id="leave-a-trail-of-crumbs" class="level3">
<h3 class="anchored" data-anchor-id="leave-a-trail-of-crumbs">Leave A Trail of Crumbs</h3>
<p>Be sure to answer this question: How can I preserve a record of this observation in such a way that I can quickly return to it and gather more data on it if necessary? If you fail to successfully answer this question, then you’ll be lost in the woods if you ever want to restudy, and the only way home is to replicate the study from scratch.</p>
</section>
<section id="give-meaningful-names" class="level3">
<h3 class="anchored" data-anchor-id="give-meaningful-names">Give Meaningful Names</h3>
<p>Give meaningful names to both the names of predictor columns, as well as to labels of nominal observations. Keeping a readme describing the data is still a good idea, but at least now the data is approachable at first glance.</p>
</section>
<section id="distinguish-between-0-and-na" class="level3">
<h3 class="anchored" data-anchor-id="distinguish-between-0-and-na">Distinguish between <code>0</code> and <code>NA</code></h3>
<p>I have worked with some spreadsheets where missing data was given a value of <code>0</code>, which will mess things up. For example, /oy/ is a fairly rarely occurring phoneme in English, and it’s possible that a speaker won’t produce any tokens in a short interview. In a spreadsheet of mean F1 and F2 for all vowels, that speaker should get an <code>NA</code> for /oy/, <strong>not</strong> <code>0</code>.</p>
</section>
</section>
<section id="storing-data" class="level2">
<h2 class="anchored" data-anchor-id="storing-data">Storing Data</h2>
<p>When we store data, it should be:</p>
<dl>
<dt>Raw</dt>
<dd>
<p>Raw data is the most useful data. It’s impossible to move down to smaller granularity from a coarser, summarized granularity. Summary tables etc. are nice for publishing in a paper document, but raw data is what we need for asking novel research questions with old data.</p>
</dd>
<dt>Open Formatted</dt>
<dd>
<p>Do not use proprietary database software for long term storage of your data. I have enough heard stories about interesting data sets that are no longer accessible for research either because the software they are stored in is defunct, or current versions are not backwards compatible. At that point, your data is property of Microsoft, or whoever. Store your data as raw text, delimited in some way (I prefer tabs).</p>
</dd>
<dt>Consistent</dt>
<dd>
<p>I think this is most important when you may have data in many separate files. Each file and its headers should be consistently named and formatted. They should be consistently delimited and commented also. There is nothing worse than inconsistent headers and erratic comments, labels, headers or NA characters in a corpus. (Automation also helps here.)</p>
</dd>
<dt>Documented</dt>
<dd>
<p>Produce a readme describing the data, how it was collected and processed, and describe every variable and its possible values.</p>
</dd>
</dl>
<hr>
</section>
</section>
<section id="structuring-data" class="level1">
<h1>Structuring Data</h1>
<section id="breaking-bad-spreadsheet-habits" class="level2">
<h2 class="anchored" data-anchor-id="breaking-bad-spreadsheet-habits">Breaking Bad Spreadsheet Habits</h2>
<p>Let’s start off by looking at a picture of a data organization approach that might look familiar, and is a <em>very bad</em> way to do things:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/bad_spreadsheet.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>This spreadsheet has a fairly strict organizational structure, but is virtuously hopeless for doing any kind of serious statistical analysis. It’s also verging on irreparable using R. This because the data in this spreadsheet is organized to be easy to look at with your eyeballs 👀.</p>
<p>But looking at neatly organized data in a spreadsheet is not a statistical analysis technique. So we need to start organizing our data in a way that isn’t easy to look at, but <em>is</em> easy to graph and analyze.</p>
</section>
<section id="better-habits" class="level2">
<h2 class="anchored" data-anchor-id="better-habits">Better Habits</h2>
<p>Everyone working with data (in R or otherwise) should read Hadley Wickham’s paper on Tidy Data: <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="uri">https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html</a> If you are coming off of organizing your data like the picture above, there are a few guidelines not discussed in that paper, namely:</p>
<section id="follow-these-rules" class="level4">
<h4 class="anchored" data-anchor-id="follow-these-rules">Follow these rules</h4>
<ol type="1">
<li>The first row of the data <em>must</em> be the names of the data columns.</li>
<li>All other rows <em>must</em> be the data, and nothing else.</li>
<li>You cannot use empty rows or empty columns as visual aids to look at the data.</li>
<li>The spreadsheet must not contain any summary cells. No final row called “Average” or final column called “Total”. We can create these in R, and they make data processing more complicated if they’re included in the raw data.</li>
</ol>
</section>
<section id="semantics-of-data-structure" class="level3">
<h3 class="anchored" data-anchor-id="semantics-of-data-structure">Semantics of Data Structure</h3>
<p>In the semantics of data structure Wickham lays out, there are three important primitives:</p>
<ol type="1">
<li>Variables</li>
<li>Values</li>
<li>Observations</li>
</ol>
<section id="defining-the-primitives" class="level4">
<h4 class="anchored" data-anchor-id="defining-the-primitives">Defining the primitives</h4>
<section id="variables" class="level5">
<h5 class="anchored" data-anchor-id="variables">Variables</h5>
<p>Variables are the collections of values of interest in data analysis. For example, let’s say you were doing a study on unnormalized vowel space size by just looking at /i:/ and /ɑ/. The variables in that study could be:</p>
<ul>
<li><code>speaker</code></li>
<li><code>word</code></li>
<li><code>phoneme</code></li>
<li><code>duration</code></li>
<li><code>F1</code></li>
<li><code>F2</code></li>
<li><code>word_frequency</code></li>
</ul>
</section>
<section id="values" class="level5">
<h5 class="anchored" data-anchor-id="values">Values</h5>
<p>Values are, as the name implies, the possible values that each variable can have, for example:</p>
<ul>
<li><code>speaker</code>: <code>"Oakley"</code>, <code>"Charlie"</code>, <code>"Azaria"</code>, <code>...</code></li>
<li><code>word</code>: <code>"street"</code>, <code>"thirteen"</code>, <code>"not"</code>, <code>"got"</code>, <code>...</code></li>
<li><code>phoneme</code>: <code>"iy"</code>, <code>"ah"</code></li>
</ul>
</section>
<section id="observations" class="level5">
<h5 class="anchored" data-anchor-id="observations">Observations</h5>
<p>An observation is the minimal unit across which all variables are collected. For example, in the vowel space study, one observation would be one instance of an uttered vowel for which you record who the speaker was, the word, the duration, F1, F2, etc.</p>
</section>
</section>
<section id="organizing-data-with-these-primitives" class="level4">
<h4 class="anchored" data-anchor-id="organizing-data-with-these-primitives">Organizing data with these primitives</h4>
<p>Once you’ve thought through what the variables, values and observations are for your study, the principle of how to organize them is simple:</p>
<ol type="1">
<li>Each variable forms a column.</li>
<li>Each observation forms a row.</li>
</ol>
<p>For the vowel space size study, you might want to wind up with a plot that looks like this:</p>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>Error in iy_ah %&gt;% group_by(idstring, sex, age, plt_vclass) %&gt;% summarise(F1 = mean(F1), : could not find function "%&gt;%"</code></pre>
</div>
</div>
<p>It wouldn’t be uncommon to see the data untidily organized like this:</p>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>Error in iy_ah %&gt;% group_by(idstring, sex, age, plt_vclass) %&gt;% summarise(F1 = mean(F1), : could not find function "%&gt;%"</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
~5 minute activity
</div>
</div>
<div class="callout-body-container callout-body">
<p>In small groups, figure out the following:</p>
<ul>
<li>What are the variables in the data frame above?</li>
<li>What are the values?</li>
<li>What are the observations?</li>
<li>How should the table above be re-organized?</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-error">
<pre><code>Error in iy_ah %&gt;% group_by(idstring, sex, age, plt_vclass) %&gt;% summarise(F1 = mean(F1), : could not find function "%&gt;%"</code></pre>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="data-frames" class="level1">
<h1>Data Frames</h1>
<p>So far we have discussed the following types of values in R:</p>
<ul>
<li>numerical</li>
<li>character</li>
<li>logical</li>
</ul>
<p>And we’ve discussed the following data structures.</p>
<ul>
<li>vectors</li>
</ul>
<p>Here, we’ll cover one new data structure:</p>
<ul>
<li>data frames</li>
</ul>
<p>Data Frames are the data structure we’ll be using the most in R. When you begin thinking about data frames, a useful starting place is to think of them as spreadsheets, with columns and rows (but we’ll eventually abandon spreadsheet thinking). Let’s start out by creating a very simple data frame using the <code>data.frame()</code> function.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>pitch <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">speaker_names =</span> <span class="fu">c</span>(<span class="st">"Charlie"</span>, <span class="st">"Skyler"</span>, <span class="st">"Sawyer"</span>, <span class="st">"Jamie"</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ages =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">35</span>, <span class="dv">41</span>, <span class="dv">62</span>),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">F0 =</span> <span class="fu">c</span>(<span class="dv">114</span>, <span class="dv">189</span>, <span class="dv">189</span>, <span class="dv">199</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>pitch</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  speaker_names ages  F0
1       Charlie   18 114
2        Skyler   35 189
3        Sawyer   41 189
4         Jamie   62 199</code></pre>
</div>
</div>
<section id="finding-your-way-around" class="level2">
<h2 class="anchored" data-anchor-id="finding-your-way-around">Finding your way around</h2>
<p>The <code>pitch</code> data frame has four rows, and three columns. The rows are just numbered 1 through 4, and the three columns are named <code>speaker_names</code>, <code>ages</code> and <code>F0</code>. To find out how many rows and columns a data frame has, you can use the <code>nrow()</code> and <code>ncol()</code> functions.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(pitch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(pitch)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Most data frames you’re going to work with have a lot more rows than that. For example, <code>iy_ah</code> is a data frame that is bundled in the <code>lsa2017</code> package.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(iy_ah)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah' not found</code></pre>
</div>
</div>
<p>That’s too many rows to look at just in the console. One option is to use the <code>head()</code> function, that just prints the first 6 rows.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iy_ah)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah' not found</code></pre>
</div>
</div>
<p>Another option is to use the <code>summary()</code> function.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iy_ah)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah' not found</code></pre>
</div>
</div>
<p><code>summary()</code> is a function that works on almost every kind of object.</p>
</section>
<section id="indexing-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="indexing-data-frames">Indexing Data Frames</h2>
<p>Since data frames are 2 dimensional (rows are one dimension, columns are another), the way you index them is a little bit more complicated than with vectors. It still uses square brackets, though, but these square brackets have two positions:</p>
<div style="font-family:monospace;font-size:xx-large;text-align:center;">
<p><span style="color:#747474">df</span><span style="color:red">[</span><span style="color:#747474">row number</span><span style="color:red">,</span> <span style="color:#747474">column number</span><span style="color:red">]</span></p>
</div>
<p>If you specify a specific row number, but leave the column number blank, you’ll get back that row and all columns.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pitch[<span class="dv">1</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  speaker_names ages  F0
1       Charlie   18 114</code></pre>
</div>
</div>
<p>Alternatively, if you specify just the column number, but leave the rows blank, you’ll get back all of the values for that column.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>pitch[,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18 35 41 62</code></pre>
</div>
</div>
<p>When you specify both, you get back the value in the specified row and column</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>pitch[<span class="dv">1</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
</div>
<p>However, there is a special indexing operator for data frames that take advantage of their named columns: <code>$</code>.</p>
<div style="font-family:monospace;font-size:xx-large;text-align:center">
<p><span style="color:#747474">df</span><span style="color:red">$</span><span style="color:#747474">column_name</span></p>
</div>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>pitch<span class="sc">$</span>speaker_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Charlie" "Skyler"  "Sawyer"  "Jamie"  </code></pre>
</div>
</div>
<p>After accessing the column of a data frame, you can index it just like it’s a vector.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pitch<span class="sc">$</span>speaker_names[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Charlie"</code></pre>
</div>
</div>
<p>If you really want to, you can do logical indexing of data frames like so:</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>pitch[pitch<span class="sc">$</span>speaker_names <span class="sc">==</span> <span class="st">"Charlie"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  speaker_names ages  F0
1       Charlie   18 114</code></pre>
</div>
</div>
<p>But there’s also a function called <code>filter()</code> that you can use to do the same thing. <code>filter()</code> takes a data frame as its first argument, and then a logical statement referring to one or more of the data frame’s columns.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pitch, speaker_names <span class="sc">==</span> <span class="st">"Charlie"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'speaker_names' not found</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pitch, ages <span class="sc">&gt;</span> <span class="dv">18</span>, F0 <span class="sc">&gt;</span> <span class="dv">190</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'F0' not found</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
~5 minute activity
</div>
</div>
<div class="callout-body-container callout-body">
<p>First, review the documentation of the <code>iy_ah</code> data set with <code>?iy_ah</code>. Using <code>filter()</code> and <code>nrow()</code>, find out what percent of /i:/ tokens have a duration less than 90ms (0.09s).</p>
</div>
</div>
<hr>
</section>
</section>
<section id="reading-data-into-r" class="level1">
<h1>Reading Data into R</h1>
<p>R can easily read comma-separated (.csv) files and tab-delimited files into its memory.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> You can read them in with <code>read.csv()</code> and <code>read.delim()</code>, respectively. If your data is unavoidably in an Excel spreadsheet, there is a package called <code>readxl</code> with a function called <code>read_excel()</code> If you have the <code>readxl</code> package installed, I <em>strongly</em> recommend reading over its documentation on sheet geometry by calling up the vignette like so:</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">"sheet-geometry"</span>, <span class="at">package =</span> <span class="st">"readxl"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Last Minute Update</strong>: There is also package for reading data in from google spreadsheets <a href="https://github.com/jennybc/googlesheets" class="uri">https://github.com/jennybc/googlesheets</a>. I haven’t used it yet, but it’s gotten good reviews.</p>
<p>When loading a data file into R, you are just loading it into the R workspace. Any alterations or modifications you make to the data frame will not be reflected in the file in your system, <em>just</em> in the copy in the R workspace.</p>
<p>The tricky thing now is that the way that feels most natural or normal for you to organize and name your files and folders doesn’t necessarily translate into a good way for R (or other programming languages) to look at them. In order to load a file into R, you need to provide <code>read.csv()</code> or <code>read.delim()</code> with the “path” to the file, which is just a text string.</p>
<p>For example, here’s a screenshot of a data file I’d like to load into R.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/file.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
<p>I have the option turned on in my system to see the full path at the bottom of the file window, so you can see a full list of all of the folders this data file is embedded in. In order to read this data into R, you need to type out the full path, although a nice thing about</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>joe_vowels <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/ownCloud/DocSyncUoE/Courses/LSA/data/joe_vowels.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you’re not sure what it looks like on your system, use the <code>file.choose()</code> function.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">file.choose</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That’ll launch the default visual file browser for your system. After browsing around and clicking on a file, <code>file.choose()</code> will print the character string that represents the path to that file into the console.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hygiene
</div>
</div>
<div class="callout-body-container callout-body">
<p>Don’t rely heavily on <code>file.choose()</code>. Sometimes, I’ve seen R scripts with the following line of code in it:</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.choose</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Please never do this. I would caution against using it in any code, scripts or notebooks at all. Only ever use it to refresh your memory of where your data is located. By always writing out the the text of the path to the data, you</p>
<ul>
<li>produce more transparent code</li>
<li>allow yourself to re-run your analysis without needing to click around</li>
<li>ensure that you’re using the same data file every single time</li>
</ul>
</div>
</div>
<p>One pretty cool thing is that if a data file is up on a website somewhere, you can just access it by passing the url to <code>read.csv()</code> or <code>read.delim()</code>.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Here is some sample data on the Donner Party.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>donner <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://jofrhwld.github.io/data/donner.csv"</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(donner)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    NAME GENDER AGE  FATE FAMILY NGENDER NFATE
1 Donner      F  45  died      y       0     0
2 Donner      F  45  died      y       0     0
3 Donner      F  14 lived      y       0     1
4 Donner      F  12 lived      y       0     1
5 Donner      F   7 lived      y       0     1
6 Donner      F   6 lived      y       0     1</code></pre>
</div>
</div>
<div class="box break">
<p><span class="big-label">~5 minute activity</span></p>
<p>Download the file <code>joe_vowels.csv</code> from the course Canvas. Save it to the data directory for the course, or wherever you would like to keep it. Read it into R. What’s my mean F1 and F2 across all of my vowels?</p>
</div>
<hr>
</section>
<section id="cleaning-up-data" class="level1">
<h1>Cleaning up data</h1>
<p>We’ve discussed how data ought to be tidily organized, and we’ve now gone over how to load data, and minimally explore dataframes in R. Let’s quickly go over how to tidy up messy data a little.</p>
<p>First, let’s look at the wide <code>iy_ah_wide</code> dataframe, which is part of the <code>lsa2017</code> package.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>iy_ah_wide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah_wide' not found</code></pre>
</div>
</div>
<p>The problem with this data is</p>
<ul>
<li>There are <em>values</em> spread across the columns.</li>
<li>Individual column names have combined these <em>values</em> with some <em>variables</em>.</li>
</ul>
<p>Getting to a tidier format of the data will involve a three step process:</p>
<ol type="1">
<li>Converting this wide data format to a long data format.</li>
<li>Separating the vowel class values from the formant variable.</li>
<li>Spreading the formant variables back out along the column space.’</li>
</ol>
<p>We can do this easily with the functions <code>gather()</code>, <code>separate()</code> and <code>spread()</code> from the <code>tidyr</code> package.</p>
<p>For a smaller illustrative purpose for people who may feel uneasy about vowels and formants, I’ll be illustrating each of these steps with a simpler data set about how many apples and oranges two people bought, and how many they ate.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">person =</span> <span class="fu">c</span>(<span class="st">"Oakley"</span>, <span class="st">"Charlie"</span>),</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">apples_bought =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">apples_ate =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">oranges_bought =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>),</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">oranges_ate =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">person</th>
<th style="text-align: right;">apples_bought</th>
<th style="text-align: right;">apples_ate</th>
<th style="text-align: right;">oranges_bought</th>
<th style="text-align: right;">oranges_ate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Oakley</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Charlie</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
<p>Note, even though the column labels look different, this is is an equivalent table to formatting involving merged column label cells.</p>
<div class="half-img">
<p><img src="figures/merge_tab.png" class="img-fluid"></p>
</div>
<section id="gathering-columns" class="level2">
<h2 class="anchored" data-anchor-id="gathering-columns">Gathering Columns</h2>
<p>The <code>gather()</code> function makes <em>wide</em> data <em>long.</em> It takes the following arguments:</p>
<div class="illustrate">
<p>gather(<span class="pop">data</span>, <span class="pop">key</span>, <span class="pop">value</span>, cols)</p>
</div>
<ul>
<li><code>data</code>
<ul>
<li>Obviously, the data you want to reshape. must be a data frame.</li>
</ul></li>
<li><code>key</code> and <code>value</code>
<ul>
<li>These are new column names that you want to create. <code>gather()</code> is going to take the column names and put them in the column you give to <code>key</code>, and the values from all the cells and put them in the column you call <code>value</code>.</li>
</ul></li>
<li><code>cols</code>
<ul>
<li>An indication of which columns you want to gather, either a vector of column names, a vector of column numbers, or some specialized methods for <code>gather()</code> that we’ll discuss.</li>
</ul></li>
</ul>
<p>Here’s how that’ll work for the fruit data. We’ll tell <code>gather()</code> to gather columns 2 through 5.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>fruit_long <span class="ot">&lt;-</span> <span class="fu">gather</span>(<span class="at">data =</span> fruit,</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">key =</span> fruit_behavior,</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">value =</span> number,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in gather(data = fruit, key = fruit_behavior, value = number, 2:5): could not find function "gather"</code></pre>
</div>
</div>
<pre><code>Error in eval(expr, envir, enclos): object 'fruit_long' not found</code></pre>
<p><code>gather()</code> has returned a new data frame. It has created a new column called <code>fruit_behavior</code>, because we told it to with the <code>key</code> argument, and it has created a new column called <code>number</code>, because we told it to with the <code>value</code> function. It has taken all of the column names of the columns we told it to gather, and put them into the <code>fruit_behavior</code> column, and the numeric values from the columns we told it to gather, and put them into the <code>number</code> column. It has also repeated the rows of the other columns (<code>person</code>) as logically necessary.</p>
<p>Now, we told it to gather column numbers 2 through 5, but this would have also worked:</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(<span class="at">data =</span> fruit, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">key =</span> fruit_behavior, </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">value =</span> number, </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="st">"apples_bought"</span>,<span class="st">"apples_ate"</span>, <span class="st">"oranges_bought"</span>, <span class="st">"oranges_ate"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in gather(data = fruit, key = fruit_behavior, value = number, c("apples_bought", : could not find function "gather"</code></pre>
</div>
</div>
<p><code>gather()</code> also has a more convenient method of specifying the columns you want to gather by passing it a named range of columns. We want to gather all columns from <code>apples_bought</code> to <code>oranges_ate</code>, so we can tell it to do so with <code>apples_bought:oranges_ate</code>.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(<span class="at">data =</span> fruit, </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">key =</span> fruit_behavior, </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">value =</span> number, </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>       apples_bought<span class="sc">:</span>oranges_ate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in gather(data = fruit, key = fruit_behavior, value = number, apples_bought:oranges_ate): could not find function "gather"</code></pre>
</div>
</div>
<p>Ok, let’s do this now to the <code>iy_ah_wide</code> data, gathering all of the columns from <code>ah_F1</code> to <code>iy_F2</code>.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>iy_ah_step1 <span class="ot">&lt;-</span> <span class="fu">gather</span>(<span class="at">data =</span> iy_ah_wide, </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">key =</span> vowel_formant, </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">value =</span> hz, </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>                      ah_F1<span class="sc">:</span>iy_F2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in gather(data = iy_ah_wide, key = vowel_formant, value = hz, ah_F1:iy_F2): could not find function "gather"</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>iy_ah_step1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah_step1' not found</code></pre>
</div>
</div>
<p>For the fruit data, the only un-gathered column was <code>person</code>, but for <code>iy_ah_wide</code>, <code>idstring</code>, <code>age</code>, <code>sex</code>, and <code>year</code>, were all ungathered. Here you can see how all rows of ungathered columns are repeated as logically necessary.</p>
</section>
<section id="separating-columns" class="level2">
<h2 class="anchored" data-anchor-id="separating-columns">Separating Columns</h2>
<p>There is still a problem with both the <code>fruit_long</code> and the <code>iy_ah_step1</code> data frames, which is that two different kinds of data are merged within one column. For <code>iy_ah_step1</code>, the vowel class and formant variable are merged together (e.g.&nbsp;<code>ah_F1</code>) and for <code>fruit_long</code>, the fruit and behavior are merged together (e.g.&nbsp;<code>apple_bought</code>). We need to separate these, with a very aptly named function called <code>separate()</code></p>
<div class="illustrate">
<p>separate(<span class="pop">data</span>, <span class="pop">col</span>, <span class="pop">into</span>, <span class="pop">sep</span>)</p>
</div>
<ul>
<li><code>data</code>
<ul>
<li>Again,the data frame you want to do this separation to.</li>
</ul></li>
<li><code>col</code>
<ul>
<li>The name of the column you want to separate.</li>
</ul></li>
<li><code>into</code>
<ul>
<li>A character vector of the new column names you want to create.</li>
</ul></li>
<li><code>sep</code>
<ul>
<li>The character or regex pattern you want to use to split up the values in <code>col</code>.</li>
</ul></li>
</ul>
<p>Here’s how it works for <code>fruit_long</code>.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>fruit_separate <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> fruit_long,</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">col =</span> fruit_behavior,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"fruit"</span>, <span class="st">"behavior"</span>),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in separate(data = fruit_long, col = fruit_behavior, into = c("fruit", : could not find function "separate"</code></pre>
</div>
</div>
<pre><code>Error in eval(expr, envir, enclos): object 'fruit_separate' not found</code></pre>
<p>It has returned a new data frame with the <code>fruit_behavior</code> column split into two new columns, named after what I passed to the <code>into</code> argument. It split up <code>fruit_behavior</code> based on what I passed to <code>sep</code>, which was the underscore character.</p>
<p>Let’s do this for <code>iy_ah_step1</code> now.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>iy_ah_step2 <span class="ot">&lt;-</span> <span class="fu">separate</span>(iy_ah_step1, </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>                        vowel_formant, </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"vowel"</span>, <span class="st">"formant"</span>),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in separate(iy_ah_step1, vowel_formant, into = c("vowel", "formant"), : could not find function "separate"</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>iy_ah_step2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah_step2' not found</code></pre>
</div>
</div>
<p>We now have two separate columns for <code>vowel</code> and <code>formant</code>.</p>
<div class="box hygiene">
<p><span class="label">Hygiene</span></p>
<p>I have been very helpful and used underscores to merge together the values we want to separate. Be helpful to yourself, and be consistent in the semantics of how you used potential delimiters like <code>-</code> and <code>_</code>. Here’s an example of being helpful to yourself:</p>
<pre><code>project_subject_firstname-lastname

EDI_1_Stuart-Duddingston
EDI_2_Connor-Black-Macdowall
EDI_3_Mhairi</code></pre>
<p>This is helpful, because when you separate by underscore, you’ll have something tidy</p>
<pre><code>EDI    1    Stuart-Duddingston
EDI    2    Connor-Black-Macdowall
EDI    3    Mhairi</code></pre>
<p>If you used <code>-</code> for everything, you’ll have chaos when you try to separate them because some speakers have “double barreled” names, and some speakers have only first names:</p>
<pre><code># Input:
EDI-1-Stuart-Duddingston
EDI-2-Connor-Black-Macdowall
EDI-3-Mhairi

# Becomes

EDI    1    Stuart    Duddingston
EDI    2    Connor    Black        Macdowall
EDI    3    Mhairi</code></pre>
<p>This goes beyond R programming. You should make some decisions and stick with them for all of your data analysis, including file naming, Praat tier naming, etc.</p>
</div>
</section>
<section id="spreading-columns" class="level2">
<h2 class="anchored" data-anchor-id="spreading-columns">Spreading columns</h2>
<p>We’ve got one last step, which is spreading the values in some rows across the column space. With the <code>fruit</code> data, we might not want a column called <code>behavior</code>, but actually have two columns called <code>bought</code> and <code>ate</code>. For the vowel data, we definitely don’t want one column called <code>formant</code>. We want one called <code>F1</code> and one called <code>F2</code>. We can do this with the <code>spread()</code> function.</p>
<div class="illustrate">
<p>spread(<span class="pop">data</span>, <span class="pop">key</span>, <span class="pop">value</span>)</p>
</div>
<ul>
<li><code>data</code>
<ul>
<li>Again, the data we want to work with.</li>
</ul></li>
<li><code>key</code>
<ul>
<li>The column whose values you want to spread across the column space.</li>
</ul></li>
<li><code>value</code>
<ul>
<li>The column with values that you want to fill in the cells.</li>
</ul></li>
</ul>
<p>Here’s how that looks with the <code>fruit_separate</code> data.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>fruit_spread <span class="ot">&lt;-</span> <span class="fu">spread</span>(<span class="at">data =</span> fruit_separate,</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">key =</span> behavior,</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">value =</span> number)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in spread(data = fruit_separate, key = behavior, value = number): could not find function "spread"</code></pre>
</div>
</div>
<pre><code>Error in eval(expr, envir, enclos): object 'fruit_spread' not found</code></pre>
<p>This has created a new data frame. I told <code>spread()</code> to spread the values in <code>behavior</code> across the column space. Because it had only two unique values in it (<code>bought</code> and <code>ate</code>), it has created two new columns called <code>bought</code> and <code>ate</code>. After creating these new columns, it had to fill in the new cells with some values, and I told it to use the values in <code>number</code> for that.</p>
<p>Here’s how that works with <code>iy_ah_step2</code>.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>iy_ah_step3 <span class="ot">&lt;-</span> <span class="fu">spread</span>(<span class="at">data =</span> iy_ah_step2,</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">key =</span> formant,</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">value =</span> hz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in spread(data = iy_ah_step2, key = formant, value = hz): could not find function "spread"</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>iy_ah_step3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'iy_ah_step3' not found</code></pre>
</div>
</div>
<p>Now, we’ve finally gotten to a tidy data format. In our next meeting, we’ll discuss how to chain these three functions into one easy to read process.</p>
<div class="box idiom">
<p><span class="label">Idiom</span></p>
<p>You might have noticed that in the functions above, I’ve put a new line between individual function arguments. I’ve done this because white-space doesn’t matter when it comes to R. I could have written these with just spaces between each argument, but that would be too visually crowded.</p>
<div class="cell">
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compare</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="co"># One line</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>fruit_separate <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> fruit_long, <span class="at">col =</span> fruit_behavior, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"fruit"</span>, <span class="st">"behavior"</span>), <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in separate(data = fruit_long, col = fruit_behavior, into = c("fruit", : could not find function "separate"</code></pre>
</div>
<div class="langname">
<pre class="langname">r</pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># New Lines</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>fruit_separate <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> fruit_long, </span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">col =</span> fruit_behavior, </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"fruit"</span>, <span class="st">"behavior"</span>), </span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in separate(data = fruit_long, col = fruit_behavior, into = c("fruit", : could not find function "separate"</code></pre>
</div>
</div>
<p>I encourage you to use new lines similarly to give yourself “some space to breathe”. Don’t be shy about it. But, if you put newlines between <em>some</em> arguments, you should really put new lines between <em>all</em> arguments.</p>
</div>


<!-- -->

</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>My personal aesthetic preference is for tab-delimited files.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This doesn’t work if the file is behind encryption, i.e.&nbsp;if it begins with <code>https://</code>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>“The Donner Party (sometimes called the Donner-Reed Party) was a group of American pioneer migrants who set out for California in a wagon train. Delayed by a series of mishaps, they spent the winter of 1846–47 snowbound in the Sierra Nevadas. Some of the migrants resorted to cannibalism to survive, eating those who had succumbed to starvation and sickness.” <a href="https://en.wikipedia.org/wiki/Donner_Party" class="uri">https://en.wikipedia.org/wiki/Donner_Party</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/JoFrhwld\.github\.io\/jofrhwld\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="langname">
<pre class="langname">markdown</pre>
</div>
<div class="sourceCode" id="cb83" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Data and Data Frames"</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="an">order:</span><span class="co"> 2</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="an">knitr:</span><span class="co"> </span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">  opts_chunk: </span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="co">    error: true</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co">    warning: false</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="fu"># The Agenda</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Talk about organizing, structuring &amp; storing your data.</span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Review some important data input/output options in R.</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Review about how data frames work in R.</span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="fu">## Setup</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a><span class="fu">## \~2 minute setup</span></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a>Make sure that your current RStudio project is set to your course project. Create and save your R notebook for today (I would recommend <span class="in">`02_lecture.Rmd`</span>). Clear the workspace of anything left over from last time with the menu options <span class="in">`Session &gt; Clear Workspace`</span>.</span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a>Load the important packages for today's work:</span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lsa2017)</span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-33"><a href="#cb83-33" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb83-34"><a href="#cb83-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-35"><a href="#cb83-35" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Collection and Storage</span></span>
<span id="cb83-36"><a href="#cb83-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-37"><a href="#cb83-37" aria-hidden="true" tabindex="-1"></a><span class="fu">## General Principles of Data Collection</span></span>
<span id="cb83-38"><a href="#cb83-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-39"><a href="#cb83-39" aria-hidden="true" tabindex="-1"></a><span class="fu">### Over-collect (for some things)</span></span>
<span id="cb83-40"><a href="#cb83-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-41"><a href="#cb83-41" aria-hidden="true" tabindex="-1"></a>When collecting data in the first place, over-collect if at all possible or ethical. The world is a very complex place, so there is no way you could cram it all into a bottle, but give it your best shot! If during the course of your data analysis, you find that it would have been really useful to have data on, say, duration, as well as formant frequencies, it becomes costly to recollect that data, especially if you haven't laid the proper trail for yourself. On the other hand, *automation* of acoustic analysis or data processing can cut down on this costliness.</span>
<span id="cb83-42"><a href="#cb83-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-43"><a href="#cb83-43" aria-hidden="true" tabindex="-1"></a>This doesn't go for personal information on human subjects, though. It's important from an ethics standpoint to ask for everything you'll need, but not more. You don't want to collect an enormous demographic profile on your participants if you won't wind up using it, especially if you know you won't use it to begin with.</span>
<span id="cb83-44"><a href="#cb83-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-45"><a href="#cb83-45" aria-hidden="true" tabindex="-1"></a><span class="fu">### Preserve HiD Info</span></span>
<span id="cb83-46"><a href="#cb83-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-47"><a href="#cb83-47" aria-hidden="true" tabindex="-1"></a>If, for instance, you're collecting data on the effect of voicing on preceding vowel duration, preserve high dimensional data coding, like Lexical Item, or the transcription of the following segment. These high dimensional codings probably won't be too useful for your immediate analysis, but they will allow you to procedurally extract additional features from them at a later time. For example, if you have a column called <span class="in">`fol_seg`</span>, which is just a transcription of the following segment, it is easy create a new column called <span class="in">`manner`</span> with code that looks like this:</span>
<span id="cb83-48"><a href="#cb83-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-51"><a href="#cb83-51" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-52"><a href="#cb83-52" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(iy_ah<span class="sc">$</span>fol_seg)</span>
<span id="cb83-53"><a href="#cb83-53" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-54"><a href="#cb83-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-57"><a href="#cb83-57" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-58"><a href="#cb83-58" aria-hidden="true" tabindex="-1"></a>iy_ah <span class="ot">&lt;-</span> iy_ah <span class="sc">%&gt;%</span></span>
<span id="cb83-59"><a href="#cb83-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb83-60"><a href="#cb83-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">manner =</span> <span class="fu">recode</span>(</span>
<span id="cb83-61"><a href="#cb83-61" aria-hidden="true" tabindex="-1"></a>      fol_seg, </span>
<span id="cb83-62"><a href="#cb83-62" aria-hidden="true" tabindex="-1"></a>      <span class="at">B =</span> <span class="st">'stop'</span>,</span>
<span id="cb83-63"><a href="#cb83-63" aria-hidden="true" tabindex="-1"></a>      <span class="at">CH =</span> <span class="st">'affricate'</span>,</span>
<span id="cb83-64"><a href="#cb83-64" aria-hidden="true" tabindex="-1"></a>      <span class="at">D =</span> <span class="st">'stop'</span>,</span>
<span id="cb83-65"><a href="#cb83-65" aria-hidden="true" tabindex="-1"></a>      <span class="at">DH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-66"><a href="#cb83-66" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">F</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-67"><a href="#cb83-67" aria-hidden="true" tabindex="-1"></a>      <span class="at">G =</span> <span class="st">'stop'</span>,</span>
<span id="cb83-68"><a href="#cb83-68" aria-hidden="true" tabindex="-1"></a>      <span class="at">HH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-69"><a href="#cb83-69" aria-hidden="true" tabindex="-1"></a>      <span class="at">JH =</span> <span class="st">'affricate'</span>,</span>
<span id="cb83-70"><a href="#cb83-70" aria-hidden="true" tabindex="-1"></a>      <span class="at">K =</span> <span class="st">'stop'</span>,</span>
<span id="cb83-71"><a href="#cb83-71" aria-hidden="true" tabindex="-1"></a>      <span class="at">L =</span> <span class="st">'liquid'</span>,</span>
<span id="cb83-72"><a href="#cb83-72" aria-hidden="true" tabindex="-1"></a>      <span class="at">M =</span> <span class="st">'nasal'</span>,</span>
<span id="cb83-73"><a href="#cb83-73" aria-hidden="true" tabindex="-1"></a>      <span class="at">N =</span> <span class="st">'nasal'</span>,</span>
<span id="cb83-74"><a href="#cb83-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">NG =</span> <span class="st">'nasal'</span>,</span>
<span id="cb83-75"><a href="#cb83-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">P =</span> <span class="st">'stop'</span>,</span>
<span id="cb83-76"><a href="#cb83-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">R =</span> <span class="st">'liquid'</span>,</span>
<span id="cb83-77"><a href="#cb83-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">S =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-78"><a href="#cb83-78" aria-hidden="true" tabindex="-1"></a>      <span class="at">SH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-79"><a href="#cb83-79" aria-hidden="true" tabindex="-1"></a>      <span class="at">SP =</span> <span class="st">'pause'</span>,</span>
<span id="cb83-80"><a href="#cb83-80" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">T</span><span class="st">`</span> <span class="ot">=</span> <span class="st">'stop'</span>,</span>
<span id="cb83-81"><a href="#cb83-81" aria-hidden="true" tabindex="-1"></a>      <span class="at">TH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-82"><a href="#cb83-82" aria-hidden="true" tabindex="-1"></a>      <span class="at">V =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-83"><a href="#cb83-83" aria-hidden="true" tabindex="-1"></a>      <span class="at">W =</span> <span class="st">'glide'</span>,</span>
<span id="cb83-84"><a href="#cb83-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">Y =</span> <span class="st">'glide'</span>,</span>
<span id="cb83-85"><a href="#cb83-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">Z =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-86"><a href="#cb83-86" aria-hidden="true" tabindex="-1"></a>      <span class="at">ZH =</span> <span class="st">'fricative'</span>,</span>
<span id="cb83-87"><a href="#cb83-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> <span class="st">'vowel'</span></span>
<span id="cb83-88"><a href="#cb83-88" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb83-89"><a href="#cb83-89" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb83-90"><a href="#cb83-90" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(iy_ah<span class="sc">$</span>manner)</span>
<span id="cb83-91"><a href="#cb83-91" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-92"><a href="#cb83-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-93"><a href="#cb83-93" aria-hidden="true" tabindex="-1"></a><span class="fu">### Leave A Trail of Crumbs</span></span>
<span id="cb83-94"><a href="#cb83-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-95"><a href="#cb83-95" aria-hidden="true" tabindex="-1"></a>Be sure to answer this question: How can I preserve a record of this observation in such a way that I can quickly return to it and gather more data on it if necessary? If you fail to successfully answer this question, then you'll be lost in the woods if you ever want to restudy, and the only way home is to replicate the study from scratch.</span>
<span id="cb83-96"><a href="#cb83-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-97"><a href="#cb83-97" aria-hidden="true" tabindex="-1"></a><span class="fu">### Give Meaningful Names</span></span>
<span id="cb83-98"><a href="#cb83-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-99"><a href="#cb83-99" aria-hidden="true" tabindex="-1"></a>Give meaningful names to both the names of predictor columns, as well as to labels of nominal observations. Keeping a readme describing the data is still a good idea, but at least now the data is approachable at first glance.</span>
<span id="cb83-100"><a href="#cb83-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-101"><a href="#cb83-101" aria-hidden="true" tabindex="-1"></a><span class="fu">### Distinguish between `0` and `NA`</span></span>
<span id="cb83-102"><a href="#cb83-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-103"><a href="#cb83-103" aria-hidden="true" tabindex="-1"></a>I have worked with some spreadsheets where missing data was given a value of <span class="in">`0`</span>, which will mess things up. For example, /oy/ is a fairly rarely occurring phoneme in English, and it's possible that a speaker won't produce any tokens in a short interview. In a spreadsheet of mean F1 and F2 for all vowels, that speaker should get an <span class="in">`NA`</span> for /oy/, **not** <span class="in">`0`</span>.</span>
<span id="cb83-104"><a href="#cb83-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-105"><a href="#cb83-105" aria-hidden="true" tabindex="-1"></a><span class="fu">## Storing Data</span></span>
<span id="cb83-106"><a href="#cb83-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-107"><a href="#cb83-107" aria-hidden="true" tabindex="-1"></a>When we store data, it should be:</span>
<span id="cb83-108"><a href="#cb83-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-109"><a href="#cb83-109" aria-hidden="true" tabindex="-1"></a>Raw</span>
<span id="cb83-110"><a href="#cb83-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-111"><a href="#cb83-111" aria-hidden="true" tabindex="-1"></a>:   Raw data is the most useful data. It's impossible to move down to smaller granularity from a coarser, summarized granularity. Summary tables etc. are nice for publishing in a paper document, but raw data is what we need for asking novel research questions with old data.</span>
<span id="cb83-112"><a href="#cb83-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-113"><a href="#cb83-113" aria-hidden="true" tabindex="-1"></a>Open Formatted</span>
<span id="cb83-114"><a href="#cb83-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-115"><a href="#cb83-115" aria-hidden="true" tabindex="-1"></a>:   Do not use proprietary database software for long term storage of your data. I have enough heard stories about interesting data sets that are no longer accessible for research either because the software they are stored in is defunct, or current versions are not backwards compatible. At that point, your data is property of Microsoft, or whoever. Store your data as raw text, delimited in some way (I prefer tabs).</span>
<span id="cb83-116"><a href="#cb83-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-117"><a href="#cb83-117" aria-hidden="true" tabindex="-1"></a>Consistent</span>
<span id="cb83-118"><a href="#cb83-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-119"><a href="#cb83-119" aria-hidden="true" tabindex="-1"></a>:   I think this is most important when you may have data in many separate files. Each file and its headers should be consistently named and formatted. They should be consistently delimited and commented also. There is nothing worse than inconsistent headers and erratic comments, labels, headers or NA characters in a corpus. (Automation also helps here.)</span>
<span id="cb83-120"><a href="#cb83-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-121"><a href="#cb83-121" aria-hidden="true" tabindex="-1"></a>Documented</span>
<span id="cb83-122"><a href="#cb83-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-123"><a href="#cb83-123" aria-hidden="true" tabindex="-1"></a>:   Produce a readme describing the data, how it was collected and processed, and describe every variable and its possible values.</span>
<span id="cb83-124"><a href="#cb83-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-125"><a href="#cb83-125" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb83-126"><a href="#cb83-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-127"><a href="#cb83-127" aria-hidden="true" tabindex="-1"></a><span class="fu"># Structuring Data</span></span>
<span id="cb83-128"><a href="#cb83-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-129"><a href="#cb83-129" aria-hidden="true" tabindex="-1"></a><span class="fu">## Breaking Bad Spreadsheet Habits</span></span>
<span id="cb83-130"><a href="#cb83-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-131"><a href="#cb83-131" aria-hidden="true" tabindex="-1"></a>Let's start off by looking at a picture of a data organization approach that might look familiar, and is a *very bad* way to do things:</span>
<span id="cb83-132"><a href="#cb83-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-133"><a href="#cb83-133" aria-hidden="true" tabindex="-1"></a><span class="al">![](figures/bad_spreadsheet.png)</span>{fig-align="center" width="100%"}</span>
<span id="cb83-134"><a href="#cb83-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-135"><a href="#cb83-135" aria-hidden="true" tabindex="-1"></a>This spreadsheet has a fairly strict organizational structure, but is virtuously hopeless for doing any kind of serious statistical analysis. It's also verging on irreparable using R. This because the data in this spreadsheet is organized to be easy to look at with your eyeballs 👀.</span>
<span id="cb83-136"><a href="#cb83-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-137"><a href="#cb83-137" aria-hidden="true" tabindex="-1"></a>But looking at neatly organized data in a spreadsheet is not a statistical analysis technique. So we need to start organizing our data in a way that isn't easy to look at, but *is* easy to graph and analyze.</span>
<span id="cb83-138"><a href="#cb83-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-139"><a href="#cb83-139" aria-hidden="true" tabindex="-1"></a><span class="fu">## Better Habits</span></span>
<span id="cb83-140"><a href="#cb83-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-141"><a href="#cb83-141" aria-hidden="true" tabindex="-1"></a>Everyone working with data (in R or otherwise) should read Hadley Wickham's paper on Tidy Data: <span class="ot">&lt;https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html&gt;</span> If you are coming off of organizing your data like the picture above, there are a few guidelines not discussed in that paper, namely:</span>
<span id="cb83-142"><a href="#cb83-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-143"><a href="#cb83-143" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Follow these rules</span></span>
<span id="cb83-144"><a href="#cb83-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-145"><a href="#cb83-145" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>The first row of the data *must* be the names of the data columns.</span>
<span id="cb83-146"><a href="#cb83-146" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>All other rows *must* be the data, and nothing else.</span>
<span id="cb83-147"><a href="#cb83-147" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>You cannot use empty rows or empty columns as visual aids to look at the data.</span>
<span id="cb83-148"><a href="#cb83-148" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>The spreadsheet must not contain any summary cells. No final row called "Average" or final column called "Total". We can create these in R, and they make data processing more complicated if they're included in the raw data.</span>
<span id="cb83-149"><a href="#cb83-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-150"><a href="#cb83-150" aria-hidden="true" tabindex="-1"></a><span class="fu">### Semantics of Data Structure</span></span>
<span id="cb83-151"><a href="#cb83-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-152"><a href="#cb83-152" aria-hidden="true" tabindex="-1"></a>In the semantics of data structure Wickham lays out, there are three important primitives:</span>
<span id="cb83-153"><a href="#cb83-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-154"><a href="#cb83-154" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Variables</span>
<span id="cb83-155"><a href="#cb83-155" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Values</span>
<span id="cb83-156"><a href="#cb83-156" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Observations</span>
<span id="cb83-157"><a href="#cb83-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-158"><a href="#cb83-158" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Defining the primitives</span></span>
<span id="cb83-159"><a href="#cb83-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-160"><a href="#cb83-160" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Variables</span></span>
<span id="cb83-161"><a href="#cb83-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-162"><a href="#cb83-162" aria-hidden="true" tabindex="-1"></a>Variables are the collections of values of interest in data analysis. For example, let's say you were doing a study on unnormalized vowel space size by just looking at /i:/ and /ɑ/. The variables in that study could be:</span>
<span id="cb83-163"><a href="#cb83-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-164"><a href="#cb83-164" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`speaker`</span></span>
<span id="cb83-165"><a href="#cb83-165" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`word`</span></span>
<span id="cb83-166"><a href="#cb83-166" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`phoneme`</span></span>
<span id="cb83-167"><a href="#cb83-167" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`duration`</span></span>
<span id="cb83-168"><a href="#cb83-168" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`F1`</span></span>
<span id="cb83-169"><a href="#cb83-169" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`F2`</span></span>
<span id="cb83-170"><a href="#cb83-170" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`word_frequency`</span></span>
<span id="cb83-171"><a href="#cb83-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-172"><a href="#cb83-172" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Values</span></span>
<span id="cb83-173"><a href="#cb83-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-174"><a href="#cb83-174" aria-hidden="true" tabindex="-1"></a>Values are, as the name implies, the possible values that each variable can have, for example:</span>
<span id="cb83-175"><a href="#cb83-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-176"><a href="#cb83-176" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`speaker`</span>: <span class="in">`"Oakley"`</span>, <span class="in">`"Charlie"`</span>, <span class="in">`"Azaria"`</span>, <span class="in">`...`</span></span>
<span id="cb83-177"><a href="#cb83-177" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`word`</span>: <span class="in">`"street"`</span>, <span class="in">`"thirteen"`</span>, <span class="in">`"not"`</span>, <span class="in">`"got"`</span>, <span class="in">`...`</span></span>
<span id="cb83-178"><a href="#cb83-178" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`phoneme`</span>: <span class="in">`"iy"`</span>, <span class="in">`"ah"`</span></span>
<span id="cb83-179"><a href="#cb83-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-180"><a href="#cb83-180" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Observations</span></span>
<span id="cb83-181"><a href="#cb83-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-182"><a href="#cb83-182" aria-hidden="true" tabindex="-1"></a>An observation is the minimal unit across which all variables are collected. For example, in the vowel space study, one observation would be one instance of an uttered vowel for which you record who the speaker was, the word, the duration, F1, F2, etc.</span>
<span id="cb83-183"><a href="#cb83-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-184"><a href="#cb83-184" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Organizing data with these primitives</span></span>
<span id="cb83-185"><a href="#cb83-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-186"><a href="#cb83-186" aria-hidden="true" tabindex="-1"></a>Once you've thought through what the variables, values and observations are for your study, the principle of how to organize them is simple:</span>
<span id="cb83-187"><a href="#cb83-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-188"><a href="#cb83-188" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Each variable forms a column.</span>
<span id="cb83-189"><a href="#cb83-189" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Each observation forms a row.</span>
<span id="cb83-190"><a href="#cb83-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-191"><a href="#cb83-191" aria-hidden="true" tabindex="-1"></a>For the vowel space size study, you might want to wind up with a plot that looks like this:</span>
<span id="cb83-192"><a href="#cb83-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-195"><a href="#cb83-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-196"><a href="#cb83-196" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb83-197"><a href="#cb83-197" aria-hidden="true" tabindex="-1"></a><span class="co">#| dev: svg</span></span>
<span id="cb83-198"><a href="#cb83-198" aria-hidden="true" tabindex="-1"></a>iy_ah <span class="sc">%&gt;%</span></span>
<span id="cb83-199"><a href="#cb83-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(idstring, sex, age, plt_vclass) <span class="sc">%&gt;%</span></span>
<span id="cb83-200"><a href="#cb83-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">F1 =</span> <span class="fu">mean</span>(F1),</span>
<span id="cb83-201"><a href="#cb83-201" aria-hidden="true" tabindex="-1"></a>            <span class="at">F2 =</span> <span class="fu">mean</span>(F2)) <span class="sc">%&gt;%</span></span>
<span id="cb83-202"><a href="#cb83-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(F2, F1, <span class="at">shape =</span> plt_vclass, <span class="at">color =</span> sex))<span class="sc">+</span></span>
<span id="cb83-203"><a href="#cb83-203" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb83-204"><a href="#cb83-204" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_reverse</span>()<span class="sc">+</span></span>
<span id="cb83-205"><a href="#cb83-205" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_reverse</span>()<span class="sc">+</span></span>
<span id="cb83-206"><a href="#cb83-206" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>)<span class="sc">+</span></span>
<span id="cb83-207"><a href="#cb83-207" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_shape_discrete</span>(<span class="st">"vowel"</span>)<span class="sc">+</span></span>
<span id="cb83-208"><a href="#cb83-208" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb83-209"><a href="#cb83-209" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>()</span>
<span id="cb83-210"><a href="#cb83-210" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-211"><a href="#cb83-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-212"><a href="#cb83-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-213"><a href="#cb83-213" aria-hidden="true" tabindex="-1"></a>It wouldn't be uncommon to see the data untidily organized like this:</span>
<span id="cb83-214"><a href="#cb83-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-217"><a href="#cb83-217" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-218"><a href="#cb83-218" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb83-219"><a href="#cb83-219" aria-hidden="true" tabindex="-1"></a>iy_ah <span class="sc">%&gt;%</span></span>
<span id="cb83-220"><a href="#cb83-220" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(idstring, sex, age, plt_vclass) <span class="sc">%&gt;%</span></span>
<span id="cb83-221"><a href="#cb83-221" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">F1 =</span> <span class="fu">mean</span>(F1),</span>
<span id="cb83-222"><a href="#cb83-222" aria-hidden="true" tabindex="-1"></a>            <span class="at">F2 =</span> <span class="fu">mean</span>(F2)) <span class="sc">%&gt;%</span></span>
<span id="cb83-223"><a href="#cb83-223" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(formant, value, F1<span class="sc">:</span>F2)<span class="sc">%&gt;%</span></span>
<span id="cb83-224"><a href="#cb83-224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">var =</span> <span class="fu">paste</span>(plt_vclass, formant, <span class="at">sep =</span> <span class="st">"_"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb83-225"><a href="#cb83-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>plt_vclass, <span class="sc">-</span>formant)<span class="sc">%&gt;%</span></span>
<span id="cb83-226"><a href="#cb83-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(var, value)</span>
<span id="cb83-227"><a href="#cb83-227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-228"><a href="#cb83-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-229"><a href="#cb83-229" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb83-230"><a href="#cb83-230" aria-hidden="true" tabindex="-1"></a><span class="fu">## \~5 minute activity</span></span>
<span id="cb83-231"><a href="#cb83-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-232"><a href="#cb83-232" aria-hidden="true" tabindex="-1"></a>In small groups, figure out the following:</span>
<span id="cb83-233"><a href="#cb83-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-234"><a href="#cb83-234" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>What are the variables in the data frame above?</span>
<span id="cb83-235"><a href="#cb83-235" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>What are the values?</span>
<span id="cb83-236"><a href="#cb83-236" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>What are the observations?</span>
<span id="cb83-237"><a href="#cb83-237" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>How should the table above be re-organized?</span>
<span id="cb83-238"><a href="#cb83-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-241"><a href="#cb83-241" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-242"><a href="#cb83-242" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb83-243"><a href="#cb83-243" aria-hidden="true" tabindex="-1"></a>iy_ah <span class="sc">%&gt;%</span></span>
<span id="cb83-244"><a href="#cb83-244" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(idstring, sex, age, plt_vclass) <span class="sc">%&gt;%</span></span>
<span id="cb83-245"><a href="#cb83-245" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">F1 =</span> <span class="fu">mean</span>(F1),</span>
<span id="cb83-246"><a href="#cb83-246" aria-hidden="true" tabindex="-1"></a>            <span class="at">F2 =</span> <span class="fu">mean</span>(F2))</span>
<span id="cb83-247"><a href="#cb83-247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-248"><a href="#cb83-248" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-249"><a href="#cb83-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-250"><a href="#cb83-250" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Frames</span></span>
<span id="cb83-251"><a href="#cb83-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-252"><a href="#cb83-252" aria-hidden="true" tabindex="-1"></a>So far we have discussed the following types of values in R:</span>
<span id="cb83-253"><a href="#cb83-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-254"><a href="#cb83-254" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>numerical</span>
<span id="cb83-255"><a href="#cb83-255" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>character</span>
<span id="cb83-256"><a href="#cb83-256" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>logical</span>
<span id="cb83-257"><a href="#cb83-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-258"><a href="#cb83-258" aria-hidden="true" tabindex="-1"></a>And we've discussed the following data structures.</span>
<span id="cb83-259"><a href="#cb83-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-260"><a href="#cb83-260" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>vectors</span>
<span id="cb83-261"><a href="#cb83-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-262"><a href="#cb83-262" aria-hidden="true" tabindex="-1"></a>Here, we'll cover one new data structure:</span>
<span id="cb83-263"><a href="#cb83-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-264"><a href="#cb83-264" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>data frames</span>
<span id="cb83-265"><a href="#cb83-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-266"><a href="#cb83-266" aria-hidden="true" tabindex="-1"></a>Data Frames are the data structure we'll be using the most in R. When you begin thinking about data frames, a useful starting place is to think of them as spreadsheets, with columns and rows (but we'll eventually abandon spreadsheet thinking). Let's start out by creating a very simple data frame using the <span class="in">`data.frame()`</span> function.</span>
<span id="cb83-267"><a href="#cb83-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-270"><a href="#cb83-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-271"><a href="#cb83-271" aria-hidden="true" tabindex="-1"></a>pitch <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb83-272"><a href="#cb83-272" aria-hidden="true" tabindex="-1"></a>  <span class="at">speaker_names =</span> <span class="fu">c</span>(<span class="st">"Charlie"</span>, <span class="st">"Skyler"</span>, <span class="st">"Sawyer"</span>, <span class="st">"Jamie"</span>),</span>
<span id="cb83-273"><a href="#cb83-273" aria-hidden="true" tabindex="-1"></a>  <span class="at">ages =</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">35</span>, <span class="dv">41</span>, <span class="dv">62</span>),</span>
<span id="cb83-274"><a href="#cb83-274" aria-hidden="true" tabindex="-1"></a>  <span class="at">F0 =</span> <span class="fu">c</span>(<span class="dv">114</span>, <span class="dv">189</span>, <span class="dv">189</span>, <span class="dv">199</span>)</span>
<span id="cb83-275"><a href="#cb83-275" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-276"><a href="#cb83-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-277"><a href="#cb83-277" aria-hidden="true" tabindex="-1"></a>pitch</span>
<span id="cb83-278"><a href="#cb83-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-279"><a href="#cb83-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-280"><a href="#cb83-280" aria-hidden="true" tabindex="-1"></a><span class="fu">## Finding your way around</span></span>
<span id="cb83-281"><a href="#cb83-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-282"><a href="#cb83-282" aria-hidden="true" tabindex="-1"></a>The <span class="in">`pitch`</span> data frame has four rows, and three columns. The rows are just numbered 1 through 4, and the three columns are named <span class="in">`speaker_names`</span>, <span class="in">`ages`</span> and <span class="in">`F0`</span>. To find out how many rows and columns a data frame has, you can use the <span class="in">`nrow()`</span> and <span class="in">`ncol()`</span> functions.</span>
<span id="cb83-283"><a href="#cb83-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-286"><a href="#cb83-286" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-287"><a href="#cb83-287" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(pitch)</span>
<span id="cb83-288"><a href="#cb83-288" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(pitch)</span>
<span id="cb83-289"><a href="#cb83-289" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-290"><a href="#cb83-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-291"><a href="#cb83-291" aria-hidden="true" tabindex="-1"></a>Most data frames you're going to work with have a lot more rows than that. For example, <span class="in">`iy_ah`</span> is a data frame that is bundled in the <span class="in">`lsa2017`</span> package.</span>
<span id="cb83-292"><a href="#cb83-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-295"><a href="#cb83-295" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-296"><a href="#cb83-296" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(iy_ah)</span>
<span id="cb83-297"><a href="#cb83-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-298"><a href="#cb83-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-299"><a href="#cb83-299" aria-hidden="true" tabindex="-1"></a>That's too many rows to look at just in the console. One option is to use the <span class="in">`head()`</span> function, that just prints the first 6 rows.</span>
<span id="cb83-300"><a href="#cb83-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-303"><a href="#cb83-303" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-304"><a href="#cb83-304" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iy_ah)</span>
<span id="cb83-305"><a href="#cb83-305" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-306"><a href="#cb83-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-307"><a href="#cb83-307" aria-hidden="true" tabindex="-1"></a>Another option is to use the <span class="in">`summary()`</span> function.</span>
<span id="cb83-308"><a href="#cb83-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-311"><a href="#cb83-311" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-312"><a href="#cb83-312" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(iy_ah)</span>
<span id="cb83-313"><a href="#cb83-313" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-314"><a href="#cb83-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-315"><a href="#cb83-315" aria-hidden="true" tabindex="-1"></a><span class="in">`summary()`</span> is a function that works on almost every kind of object.</span>
<span id="cb83-316"><a href="#cb83-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-317"><a href="#cb83-317" aria-hidden="true" tabindex="-1"></a><span class="fu">## Indexing Data Frames</span></span>
<span id="cb83-318"><a href="#cb83-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-319"><a href="#cb83-319" aria-hidden="true" tabindex="-1"></a>Since data frames are 2 dimensional (rows are one dimension, columns are another), the way you index them is a little bit more complicated than with vectors. It still uses square brackets, though, but these square brackets have two positions:</span>
<span id="cb83-320"><a href="#cb83-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-321"><a href="#cb83-321" aria-hidden="true" tabindex="-1"></a>::: {style="font-family:monospace;font-size:xx-large;text-align:center;"}</span>
<span id="cb83-322"><a href="#cb83-322" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">df</span><span class="co">]</span>{style="color:#747474"}<span class="co">[</span><span class="ot">\[</span><span class="co">]</span>{style="color:red"}<span class="co">[</span><span class="ot">row number</span><span class="co">]</span>{style="color:#747474"}<span class="co">[</span><span class="ot">,</span><span class="co">]</span>{style="color:red"} <span class="co">[</span><span class="ot">column number</span><span class="co">]</span>{style="color:#747474"}<span class="co">[</span><span class="ot">\]</span><span class="co">]</span>{style="color:red"}</span>
<span id="cb83-323"><a href="#cb83-323" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-324"><a href="#cb83-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-325"><a href="#cb83-325" aria-hidden="true" tabindex="-1"></a>If you specify a specific row number, but leave the column number blank, you'll get back that row and all columns.</span>
<span id="cb83-326"><a href="#cb83-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-329"><a href="#cb83-329" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-330"><a href="#cb83-330" aria-hidden="true" tabindex="-1"></a>pitch[<span class="dv">1</span>,]</span>
<span id="cb83-331"><a href="#cb83-331" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-332"><a href="#cb83-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-333"><a href="#cb83-333" aria-hidden="true" tabindex="-1"></a>Alternatively, if you specify just the column number, but leave the rows blank, you'll get back all of the values for that column.</span>
<span id="cb83-334"><a href="#cb83-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-337"><a href="#cb83-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-338"><a href="#cb83-338" aria-hidden="true" tabindex="-1"></a>pitch[,<span class="dv">2</span>]</span>
<span id="cb83-339"><a href="#cb83-339" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-340"><a href="#cb83-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-341"><a href="#cb83-341" aria-hidden="true" tabindex="-1"></a>When you specify both, you get back the value in the specified row and column</span>
<span id="cb83-342"><a href="#cb83-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-345"><a href="#cb83-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-346"><a href="#cb83-346" aria-hidden="true" tabindex="-1"></a>pitch[<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb83-347"><a href="#cb83-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-348"><a href="#cb83-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-349"><a href="#cb83-349" aria-hidden="true" tabindex="-1"></a>However, there is a special indexing operator for data frames that take advantage of their named columns: <span class="in">`$`</span>.</span>
<span id="cb83-350"><a href="#cb83-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-351"><a href="#cb83-351" aria-hidden="true" tabindex="-1"></a>::: {style="font-family:monospace;font-size:xx-large;text-align:center"}</span>
<span id="cb83-352"><a href="#cb83-352" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">df</span><span class="co">]</span>{style="color:#747474"}<span class="co">[</span><span class="ot">\$</span><span class="co">]</span>{style="color:red"}<span class="co">[</span><span class="ot">column_name</span><span class="co">]</span>{style="color:#747474"}</span>
<span id="cb83-353"><a href="#cb83-353" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-354"><a href="#cb83-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-357"><a href="#cb83-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-358"><a href="#cb83-358" aria-hidden="true" tabindex="-1"></a>pitch<span class="sc">$</span>speaker_names</span>
<span id="cb83-359"><a href="#cb83-359" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-360"><a href="#cb83-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-361"><a href="#cb83-361" aria-hidden="true" tabindex="-1"></a>After accessing the column of a data frame, you can index it just like it's a vector.</span>
<span id="cb83-362"><a href="#cb83-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-365"><a href="#cb83-365" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-366"><a href="#cb83-366" aria-hidden="true" tabindex="-1"></a>pitch<span class="sc">$</span>speaker_names[<span class="dv">1</span>]</span>
<span id="cb83-367"><a href="#cb83-367" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-368"><a href="#cb83-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-369"><a href="#cb83-369" aria-hidden="true" tabindex="-1"></a>If you really want to, you can do logical indexing of data frames like so:</span>
<span id="cb83-370"><a href="#cb83-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-373"><a href="#cb83-373" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-374"><a href="#cb83-374" aria-hidden="true" tabindex="-1"></a>pitch[pitch<span class="sc">$</span>speaker_names <span class="sc">==</span> <span class="st">"Charlie"</span>, ]</span>
<span id="cb83-375"><a href="#cb83-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-376"><a href="#cb83-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-377"><a href="#cb83-377" aria-hidden="true" tabindex="-1"></a>But there's also a function called <span class="in">`filter()`</span> that you can use to do the same thing. <span class="in">`filter()`</span> takes a data frame as its first argument, and then a logical statement referring to one or more of the data frame's columns.</span>
<span id="cb83-378"><a href="#cb83-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-381"><a href="#cb83-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-382"><a href="#cb83-382" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pitch, speaker_names <span class="sc">==</span> <span class="st">"Charlie"</span>)</span>
<span id="cb83-383"><a href="#cb83-383" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(pitch, ages <span class="sc">&gt;</span> <span class="dv">18</span>, F0 <span class="sc">&gt;</span> <span class="dv">190</span>)</span>
<span id="cb83-384"><a href="#cb83-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-385"><a href="#cb83-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-386"><a href="#cb83-386" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb83-387"><a href="#cb83-387" aria-hidden="true" tabindex="-1"></a><span class="fu">## \~5 minute activity</span></span>
<span id="cb83-388"><a href="#cb83-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-389"><a href="#cb83-389" aria-hidden="true" tabindex="-1"></a>First, review the documentation of the <span class="in">`iy_ah`</span> data set with <span class="in">`?iy_ah`</span>. Using <span class="in">`filter()`</span> and <span class="in">`nrow()`</span>, find out what percent of /i:/ tokens have a duration less than 90ms (0.09s).</span>
<span id="cb83-390"><a href="#cb83-390" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-391"><a href="#cb83-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-392"><a href="#cb83-392" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb83-393"><a href="#cb83-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-394"><a href="#cb83-394" aria-hidden="true" tabindex="-1"></a><span class="fu"># Reading Data into R</span></span>
<span id="cb83-395"><a href="#cb83-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-396"><a href="#cb83-396" aria-hidden="true" tabindex="-1"></a>R can easily read comma-separated (.csv) files and tab-delimited files into its memory.<span class="ot">[^1]</span> You can read them in with <span class="in">`read.csv()`</span> and <span class="in">`read.delim()`</span>, respectively. If your data is unavoidably in an Excel spreadsheet, there is a package called <span class="in">`readxl`</span> with a function called <span class="in">`read_excel()`</span> If you have the <span class="in">`readxl`</span> package installed, I *strongly* recommend reading over its documentation on sheet geometry by calling up the vignette like so:</span>
<span id="cb83-397"><a href="#cb83-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-398"><a href="#cb83-398" aria-hidden="true" tabindex="-1"></a><span class="ot">[^1]: </span>My personal aesthetic preference is for tab-delimited files.</span>
<span id="cb83-399"><a href="#cb83-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-402"><a href="#cb83-402" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-403"><a href="#cb83-403" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb83-404"><a href="#cb83-404" aria-hidden="true" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">"sheet-geometry"</span>, <span class="at">package =</span> <span class="st">"readxl"</span>)</span>
<span id="cb83-405"><a href="#cb83-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-406"><a href="#cb83-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-407"><a href="#cb83-407" aria-hidden="true" tabindex="-1"></a>**Last Minute Update**: There is also package for reading data in from google spreadsheets <span class="ot">&lt;https://github.com/jennybc/googlesheets&gt;</span>. I haven't used it yet, but it's gotten good reviews.</span>
<span id="cb83-408"><a href="#cb83-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-409"><a href="#cb83-409" aria-hidden="true" tabindex="-1"></a>When loading a data file into R, you are just loading it into the R workspace. Any alterations or modifications you make to the data frame will not be reflected in the file in your system, *just* in the copy in the R workspace.</span>
<span id="cb83-410"><a href="#cb83-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-411"><a href="#cb83-411" aria-hidden="true" tabindex="-1"></a>The tricky thing now is that the way that feels most natural or normal for you to organize and name your files and folders doesn't necessarily translate into a good way for R (or other programming languages) to look at them. In order to load a file into R, you need to provide <span class="in">`read.csv()`</span> or <span class="in">`read.delim()`</span> with the "path" to the file, which is just a text string.</span>
<span id="cb83-412"><a href="#cb83-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-413"><a href="#cb83-413" aria-hidden="true" tabindex="-1"></a>For example, here's a screenshot of a data file I'd like to load into R.</span>
<span id="cb83-414"><a href="#cb83-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-415"><a href="#cb83-415" aria-hidden="true" tabindex="-1"></a><span class="al">![](figures/file.png)</span>{fig-align="center" width="100%"}</span>
<span id="cb83-416"><a href="#cb83-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-417"><a href="#cb83-417" aria-hidden="true" tabindex="-1"></a>I have the option turned on in my system to see the full path at the bottom of the file window, so you can see a full list of all of the folders this data file is embedded in. In order to read this data into R, you need to type out the full path, although a nice thing about</span>
<span id="cb83-418"><a href="#cb83-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-421"><a href="#cb83-421" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-422"><a href="#cb83-422" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb83-423"><a href="#cb83-423" aria-hidden="true" tabindex="-1"></a>joe_vowels <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"~/ownCloud/DocSyncUoE/Courses/LSA/data/joe_vowels.csv"</span>)</span>
<span id="cb83-424"><a href="#cb83-424" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-425"><a href="#cb83-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-426"><a href="#cb83-426" aria-hidden="true" tabindex="-1"></a>If you're not sure what it looks like on your system, use the <span class="in">`file.choose()`</span> function.</span>
<span id="cb83-427"><a href="#cb83-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-428"><a href="#cb83-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = F}</span></span>
<span id="cb83-429"><a href="#cb83-429" aria-hidden="true" tabindex="-1"></a><span class="in">#| eval: false</span></span>
<span id="cb83-430"><a href="#cb83-430" aria-hidden="true" tabindex="-1"></a><span class="in">file.choose()</span></span>
<span id="cb83-431"><a href="#cb83-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-432"><a href="#cb83-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-433"><a href="#cb83-433" aria-hidden="true" tabindex="-1"></a>That'll launch the default visual file browser for your system. After browsing around and clicking on a file, <span class="in">`file.choose()`</span> will print the character string that represents the path to that file into the console.</span>
<span id="cb83-434"><a href="#cb83-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-435"><a href="#cb83-435" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb83-436"><a href="#cb83-436" aria-hidden="true" tabindex="-1"></a><span class="fu">## Hygiene</span></span>
<span id="cb83-437"><a href="#cb83-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-438"><a href="#cb83-438" aria-hidden="true" tabindex="-1"></a>Don't rely heavily on <span class="in">`file.choose()`</span>. Sometimes, I've seen R scripts with the following line of code in it:</span>
<span id="cb83-439"><a href="#cb83-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-442"><a href="#cb83-442" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-443"><a href="#cb83-443" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb83-444"><a href="#cb83-444" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.choose</span>())</span>
<span id="cb83-445"><a href="#cb83-445" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-446"><a href="#cb83-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-447"><a href="#cb83-447" aria-hidden="true" tabindex="-1"></a>Please never do this. I would caution against using it in any code, scripts or notebooks at all. Only ever use it to refresh your memory of where your data is located. By always writing out the the text of the path to the data, you</span>
<span id="cb83-448"><a href="#cb83-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-449"><a href="#cb83-449" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>produce more transparent code</span>
<span id="cb83-450"><a href="#cb83-450" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>allow yourself to re-run your analysis without needing to click around</span>
<span id="cb83-451"><a href="#cb83-451" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>ensure that you're using the same data file every single time</span>
<span id="cb83-452"><a href="#cb83-452" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-453"><a href="#cb83-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-454"><a href="#cb83-454" aria-hidden="true" tabindex="-1"></a>One pretty cool thing is that if a data file is up on a website somewhere, you can just access it by passing the url to <span class="in">`read.csv()`</span> or <span class="in">`read.delim()`</span>.<span class="ot">[^2]</span> Here is some sample data on the Donner Party.<span class="ot">[^3]</span></span>
<span id="cb83-455"><a href="#cb83-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-456"><a href="#cb83-456" aria-hidden="true" tabindex="-1"></a><span class="ot">[^2]: </span>This doesn't work if the file is behind encryption, i.e. if it begins with <span class="in">`https://`</span>.</span>
<span id="cb83-457"><a href="#cb83-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-458"><a href="#cb83-458" aria-hidden="true" tabindex="-1"></a><span class="ot">[^3]: </span>"The Donner Party (sometimes called the Donner-Reed Party) was a group of American pioneer migrants who set out for California in a wagon train. Delayed by a series of mishaps, they spent the winter of 1846--47 snowbound in the Sierra Nevadas. Some of the migrants resorted to cannibalism to survive, eating those who had succumbed to starvation and sickness." <span class="ot">&lt;https://en.wikipedia.org/wiki/Donner_Party&gt;</span></span>
<span id="cb83-459"><a href="#cb83-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-462"><a href="#cb83-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-463"><a href="#cb83-463" aria-hidden="true" tabindex="-1"></a>donner <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://jofrhwld.github.io/data/donner.csv"</span>)</span>
<span id="cb83-464"><a href="#cb83-464" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(donner)</span>
<span id="cb83-465"><a href="#cb83-465" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-466"><a href="#cb83-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-467"><a href="#cb83-467" aria-hidden="true" tabindex="-1"></a>::: {.box .break}</span>
<span id="cb83-468"><a href="#cb83-468" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">\~5 minute activity</span><span class="co">]</span>{.big-label}</span>
<span id="cb83-469"><a href="#cb83-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-470"><a href="#cb83-470" aria-hidden="true" tabindex="-1"></a>Download the file <span class="in">`joe_vowels.csv`</span> from the course Canvas. Save it to the data directory for the course, or wherever you would like to keep it. Read it into R. What's my mean F1 and F2 across all of my vowels?</span>
<span id="cb83-471"><a href="#cb83-471" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-472"><a href="#cb83-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-473"><a href="#cb83-473" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------</span>
<span id="cb83-474"><a href="#cb83-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-475"><a href="#cb83-475" aria-hidden="true" tabindex="-1"></a><span class="fu"># Cleaning up data</span></span>
<span id="cb83-476"><a href="#cb83-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-477"><a href="#cb83-477" aria-hidden="true" tabindex="-1"></a>We've discussed how data ought to be tidily organized, and we've now gone over how to load data, and minimally explore dataframes in R. Let's quickly go over how to tidy up messy data a little.</span>
<span id="cb83-478"><a href="#cb83-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-479"><a href="#cb83-479" aria-hidden="true" tabindex="-1"></a>First, let's look at the wide <span class="in">`iy_ah_wide`</span> dataframe, which is part of the <span class="in">`lsa2017`</span> package.</span>
<span id="cb83-480"><a href="#cb83-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-483"><a href="#cb83-483" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-484"><a href="#cb83-484" aria-hidden="true" tabindex="-1"></a>iy_ah_wide</span>
<span id="cb83-485"><a href="#cb83-485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-486"><a href="#cb83-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-487"><a href="#cb83-487" aria-hidden="true" tabindex="-1"></a>The problem with this data is</span>
<span id="cb83-488"><a href="#cb83-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-489"><a href="#cb83-489" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>There are *values* spread across the columns.</span>
<span id="cb83-490"><a href="#cb83-490" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Individual column names have combined these *values* with some *variables*.</span>
<span id="cb83-491"><a href="#cb83-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-492"><a href="#cb83-492" aria-hidden="true" tabindex="-1"></a>Getting to a tidier format of the data will involve a three step process:</span>
<span id="cb83-493"><a href="#cb83-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-494"><a href="#cb83-494" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Converting this wide data format to a long data format.</span>
<span id="cb83-495"><a href="#cb83-495" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Separating the vowel class values from the formant variable.</span>
<span id="cb83-496"><a href="#cb83-496" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Spreading the formant variables back out along the column space.'</span>
<span id="cb83-497"><a href="#cb83-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-498"><a href="#cb83-498" aria-hidden="true" tabindex="-1"></a>We can do this easily with the functions <span class="in">`gather()`</span>, <span class="in">`separate()`</span> and <span class="in">`spread()`</span> from the <span class="in">`tidyr`</span> package.</span>
<span id="cb83-499"><a href="#cb83-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-500"><a href="#cb83-500" aria-hidden="true" tabindex="-1"></a>For a smaller illustrative purpose for people who may feel uneasy about vowels and formants, I'll be illustrating each of these steps with a simpler data set about how many apples and oranges two people bought, and how many they ate.</span>
<span id="cb83-501"><a href="#cb83-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-504"><a href="#cb83-504" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-505"><a href="#cb83-505" aria-hidden="true" tabindex="-1"></a>fruit <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">person =</span> <span class="fu">c</span>(<span class="st">"Oakley"</span>, <span class="st">"Charlie"</span>),</span>
<span id="cb83-506"><a href="#cb83-506" aria-hidden="true" tabindex="-1"></a>                 <span class="at">apples_bought =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">3</span>),</span>
<span id="cb83-507"><a href="#cb83-507" aria-hidden="true" tabindex="-1"></a>                 <span class="at">apples_ate =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb83-508"><a href="#cb83-508" aria-hidden="true" tabindex="-1"></a>                 <span class="at">oranges_bought =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">4</span>),</span>
<span id="cb83-509"><a href="#cb83-509" aria-hidden="true" tabindex="-1"></a>                 <span class="at">oranges_ate =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>))</span>
<span id="cb83-510"><a href="#cb83-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-511"><a href="#cb83-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-512"><a href="#cb83-512" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = F, results = 'asis'}</span></span>
<span id="cb83-513"><a href="#cb83-513" aria-hidden="true" tabindex="-1"></a><span class="in">library(knitr)</span></span>
<span id="cb83-514"><a href="#cb83-514" aria-hidden="true" tabindex="-1"></a><span class="in">kable(fruit)</span></span>
<span id="cb83-515"><a href="#cb83-515" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-516"><a href="#cb83-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-517"><a href="#cb83-517" aria-hidden="true" tabindex="-1"></a>Note, even though the column labels look different, this is is an equivalent table to formatting involving merged column label cells.</span>
<span id="cb83-518"><a href="#cb83-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-519"><a href="#cb83-519" aria-hidden="true" tabindex="-1"></a>::: half-img</span>
<span id="cb83-520"><a href="#cb83-520" aria-hidden="true" tabindex="-1"></a><span class="al">![](figures/merge_tab.png)</span></span>
<span id="cb83-521"><a href="#cb83-521" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-522"><a href="#cb83-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-523"><a href="#cb83-523" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gathering Columns</span></span>
<span id="cb83-524"><a href="#cb83-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-525"><a href="#cb83-525" aria-hidden="true" tabindex="-1"></a>The <span class="in">`gather()`</span> function makes *wide* data *long.* It takes the following arguments:</span>
<span id="cb83-526"><a href="#cb83-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-527"><a href="#cb83-527" aria-hidden="true" tabindex="-1"></a>::: illustrate</span>
<span id="cb83-528"><a href="#cb83-528" aria-hidden="true" tabindex="-1"></a>gather(<span class="co">[</span><span class="ot">data</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">key</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">value</span><span class="co">]</span>{.pop}, cols)</span>
<span id="cb83-529"><a href="#cb83-529" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-530"><a href="#cb83-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-531"><a href="#cb83-531" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`data`</span></span>
<span id="cb83-532"><a href="#cb83-532" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Obviously, the data you want to reshape. must be a data frame.</span>
<span id="cb83-533"><a href="#cb83-533" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`key`</span> and <span class="in">`value`</span></span>
<span id="cb83-534"><a href="#cb83-534" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>These are new column names that you want to create. <span class="in">`gather()`</span> is going to take the column names and put them in the column you give to <span class="in">`key`</span>, and the values from all the cells and put them in the column you call <span class="in">`value`</span>.</span>
<span id="cb83-535"><a href="#cb83-535" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`cols`</span></span>
<span id="cb83-536"><a href="#cb83-536" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>An indication of which columns you want to gather, either a vector of column names, a vector of column numbers, or some specialized methods for <span class="in">`gather()`</span> that we'll discuss.</span>
<span id="cb83-537"><a href="#cb83-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-538"><a href="#cb83-538" aria-hidden="true" tabindex="-1"></a>Here's how that'll work for the fruit data. We'll tell <span class="in">`gather()`</span> to gather columns 2 through 5.</span>
<span id="cb83-539"><a href="#cb83-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-542"><a href="#cb83-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-543"><a href="#cb83-543" aria-hidden="true" tabindex="-1"></a>fruit_long <span class="ot">&lt;-</span> <span class="fu">gather</span>(<span class="at">data =</span> fruit,</span>
<span id="cb83-544"><a href="#cb83-544" aria-hidden="true" tabindex="-1"></a>                     <span class="at">key =</span> fruit_behavior,</span>
<span id="cb83-545"><a href="#cb83-545" aria-hidden="true" tabindex="-1"></a>                     <span class="at">value =</span> number,</span>
<span id="cb83-546"><a href="#cb83-546" aria-hidden="true" tabindex="-1"></a>                     <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb83-547"><a href="#cb83-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-548"><a href="#cb83-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-549"><a href="#cb83-549" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo=F, results = 'asis'}</span></span>
<span id="cb83-550"><a href="#cb83-550" aria-hidden="true" tabindex="-1"></a><span class="in">kable(fruit_long)</span></span>
<span id="cb83-551"><a href="#cb83-551" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-552"><a href="#cb83-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-553"><a href="#cb83-553" aria-hidden="true" tabindex="-1"></a><span class="in">`gather()`</span> has returned a new data frame. It has created a new column called <span class="in">`fruit_behavior`</span>, because we told it to with the <span class="in">`key`</span> argument, and it has created a new column called <span class="in">`number`</span>, because we told it to with the <span class="in">`value`</span> function. It has taken all of the column names of the columns we told it to gather, and put them into the <span class="in">`fruit_behavior`</span> column, and the numeric values from the columns we told it to gather, and put them into the <span class="in">`number`</span> column. It has also repeated the rows of the other columns (<span class="in">`person`</span>) as logically necessary.</span>
<span id="cb83-554"><a href="#cb83-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-555"><a href="#cb83-555" aria-hidden="true" tabindex="-1"></a>Now, we told it to gather column numbers 2 through 5, but this would have also worked:</span>
<span id="cb83-556"><a href="#cb83-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-559"><a href="#cb83-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-560"><a href="#cb83-560" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(<span class="at">data =</span> fruit, </span>
<span id="cb83-561"><a href="#cb83-561" aria-hidden="true" tabindex="-1"></a>       <span class="at">key =</span> fruit_behavior, </span>
<span id="cb83-562"><a href="#cb83-562" aria-hidden="true" tabindex="-1"></a>       <span class="at">value =</span> number, </span>
<span id="cb83-563"><a href="#cb83-563" aria-hidden="true" tabindex="-1"></a>       <span class="fu">c</span>(<span class="st">"apples_bought"</span>,<span class="st">"apples_ate"</span>, <span class="st">"oranges_bought"</span>, <span class="st">"oranges_ate"</span>))</span>
<span id="cb83-564"><a href="#cb83-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-565"><a href="#cb83-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-566"><a href="#cb83-566" aria-hidden="true" tabindex="-1"></a><span class="in">`gather()`</span> also has a more convenient method of specifying the columns you want to gather by passing it a named range of columns. We want to gather all columns from <span class="in">`apples_bought`</span> to <span class="in">`oranges_ate`</span>, so we can tell it to do so with <span class="in">`apples_bought:oranges_ate`</span>.</span>
<span id="cb83-567"><a href="#cb83-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-570"><a href="#cb83-570" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-571"><a href="#cb83-571" aria-hidden="true" tabindex="-1"></a><span class="fu">gather</span>(<span class="at">data =</span> fruit, </span>
<span id="cb83-572"><a href="#cb83-572" aria-hidden="true" tabindex="-1"></a>       <span class="at">key =</span> fruit_behavior, </span>
<span id="cb83-573"><a href="#cb83-573" aria-hidden="true" tabindex="-1"></a>       <span class="at">value =</span> number, </span>
<span id="cb83-574"><a href="#cb83-574" aria-hidden="true" tabindex="-1"></a>       apples_bought<span class="sc">:</span>oranges_ate)</span>
<span id="cb83-575"><a href="#cb83-575" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-576"><a href="#cb83-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-577"><a href="#cb83-577" aria-hidden="true" tabindex="-1"></a>Ok, let's do this now to the <span class="in">`iy_ah_wide`</span> data, gathering all of the columns from <span class="in">`ah_F1`</span> to <span class="in">`iy_F2`</span>.</span>
<span id="cb83-578"><a href="#cb83-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-581"><a href="#cb83-581" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-582"><a href="#cb83-582" aria-hidden="true" tabindex="-1"></a>iy_ah_step1 <span class="ot">&lt;-</span> <span class="fu">gather</span>(<span class="at">data =</span> iy_ah_wide, </span>
<span id="cb83-583"><a href="#cb83-583" aria-hidden="true" tabindex="-1"></a>                      <span class="at">key =</span> vowel_formant, </span>
<span id="cb83-584"><a href="#cb83-584" aria-hidden="true" tabindex="-1"></a>                      <span class="at">value =</span> hz, </span>
<span id="cb83-585"><a href="#cb83-585" aria-hidden="true" tabindex="-1"></a>                      ah_F1<span class="sc">:</span>iy_F2)</span>
<span id="cb83-586"><a href="#cb83-586" aria-hidden="true" tabindex="-1"></a>iy_ah_step1</span>
<span id="cb83-587"><a href="#cb83-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-588"><a href="#cb83-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-589"><a href="#cb83-589" aria-hidden="true" tabindex="-1"></a>For the fruit data, the only un-gathered column was <span class="in">`person`</span>, but for <span class="in">`iy_ah_wide`</span>, <span class="in">`idstring`</span>, <span class="in">`age`</span>, <span class="in">`sex`</span>, and <span class="in">`year`</span>, were all ungathered. Here you can see how all rows of ungathered columns are repeated as logically necessary.</span>
<span id="cb83-590"><a href="#cb83-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-591"><a href="#cb83-591" aria-hidden="true" tabindex="-1"></a><span class="fu">## Separating Columns</span></span>
<span id="cb83-592"><a href="#cb83-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-593"><a href="#cb83-593" aria-hidden="true" tabindex="-1"></a>There is still a problem with both the <span class="in">`fruit_long`</span> and the <span class="in">`iy_ah_step1`</span> data frames, which is that two different kinds of data are merged within one column. For <span class="in">`iy_ah_step1`</span>, the vowel class and formant variable are merged together (e.g. <span class="in">`ah_F1`</span>) and for <span class="in">`fruit_long`</span>, the fruit and behavior are merged together (e.g. <span class="in">`apple_bought`</span>). We need to separate these, with a very aptly named function called <span class="in">`separate()`</span></span>
<span id="cb83-594"><a href="#cb83-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-595"><a href="#cb83-595" aria-hidden="true" tabindex="-1"></a>::: illustrate</span>
<span id="cb83-596"><a href="#cb83-596" aria-hidden="true" tabindex="-1"></a>separate(<span class="co">[</span><span class="ot">data</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">col</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">into</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">sep</span><span class="co">]</span>{.pop})</span>
<span id="cb83-597"><a href="#cb83-597" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-598"><a href="#cb83-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-599"><a href="#cb83-599" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`data`</span></span>
<span id="cb83-600"><a href="#cb83-600" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Again,the data frame you want to do this separation to.</span>
<span id="cb83-601"><a href="#cb83-601" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`col`</span></span>
<span id="cb83-602"><a href="#cb83-602" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The name of the column you want to separate.</span>
<span id="cb83-603"><a href="#cb83-603" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`into`</span></span>
<span id="cb83-604"><a href="#cb83-604" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>A character vector of the new column names you want to create.</span>
<span id="cb83-605"><a href="#cb83-605" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`sep`</span></span>
<span id="cb83-606"><a href="#cb83-606" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The character or regex pattern you want to use to split up the values in <span class="in">`col`</span>.</span>
<span id="cb83-607"><a href="#cb83-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-608"><a href="#cb83-608" aria-hidden="true" tabindex="-1"></a>Here's how it works for <span class="in">`fruit_long`</span>.</span>
<span id="cb83-609"><a href="#cb83-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-612"><a href="#cb83-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-613"><a href="#cb83-613" aria-hidden="true" tabindex="-1"></a>fruit_separate <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> fruit_long,</span>
<span id="cb83-614"><a href="#cb83-614" aria-hidden="true" tabindex="-1"></a>                           <span class="at">col =</span> fruit_behavior,</span>
<span id="cb83-615"><a href="#cb83-615" aria-hidden="true" tabindex="-1"></a>                           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"fruit"</span>, <span class="st">"behavior"</span>),</span>
<span id="cb83-616"><a href="#cb83-616" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb83-617"><a href="#cb83-617" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-618"><a href="#cb83-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-619"><a href="#cb83-619" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = F, results='asis'}</span></span>
<span id="cb83-620"><a href="#cb83-620" aria-hidden="true" tabindex="-1"></a><span class="in">kable(fruit_separate)</span></span>
<span id="cb83-621"><a href="#cb83-621" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-622"><a href="#cb83-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-623"><a href="#cb83-623" aria-hidden="true" tabindex="-1"></a>It has returned a new data frame with the <span class="in">`fruit_behavior`</span> column split into two new columns, named after what I passed to the <span class="in">`into`</span> argument. It split up <span class="in">`fruit_behavior`</span> based on what I passed to <span class="in">`sep`</span>, which was the underscore character.</span>
<span id="cb83-624"><a href="#cb83-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-625"><a href="#cb83-625" aria-hidden="true" tabindex="-1"></a>Let's do this for <span class="in">`iy_ah_step1`</span> now.</span>
<span id="cb83-626"><a href="#cb83-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-629"><a href="#cb83-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-630"><a href="#cb83-630" aria-hidden="true" tabindex="-1"></a>iy_ah_step2 <span class="ot">&lt;-</span> <span class="fu">separate</span>(iy_ah_step1, </span>
<span id="cb83-631"><a href="#cb83-631" aria-hidden="true" tabindex="-1"></a>                        vowel_formant, </span>
<span id="cb83-632"><a href="#cb83-632" aria-hidden="true" tabindex="-1"></a>                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"vowel"</span>, <span class="st">"formant"</span>),</span>
<span id="cb83-633"><a href="#cb83-633" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb83-634"><a href="#cb83-634" aria-hidden="true" tabindex="-1"></a>iy_ah_step2</span>
<span id="cb83-635"><a href="#cb83-635" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-636"><a href="#cb83-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-637"><a href="#cb83-637" aria-hidden="true" tabindex="-1"></a>We now have two separate columns for <span class="in">`vowel`</span> and <span class="in">`formant`</span>.</span>
<span id="cb83-638"><a href="#cb83-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-639"><a href="#cb83-639" aria-hidden="true" tabindex="-1"></a>::: {.box .hygiene}</span>
<span id="cb83-640"><a href="#cb83-640" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Hygiene</span><span class="co">]</span>{.label}</span>
<span id="cb83-641"><a href="#cb83-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-642"><a href="#cb83-642" aria-hidden="true" tabindex="-1"></a>I have been very helpful and used underscores to merge together the values we want to separate. Be helpful to yourself, and be consistent in the semantics of how you used potential delimiters like <span class="in">`-`</span> and <span class="in">`_`</span>. Here's an example of being helpful to yourself:</span>
<span id="cb83-643"><a href="#cb83-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-644"><a href="#cb83-644" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb83-645"><a href="#cb83-645" aria-hidden="true" tabindex="-1"></a><span class="in">project_subject_firstname-lastname</span></span>
<span id="cb83-646"><a href="#cb83-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-647"><a href="#cb83-647" aria-hidden="true" tabindex="-1"></a><span class="in">EDI_1_Stuart-Duddingston</span></span>
<span id="cb83-648"><a href="#cb83-648" aria-hidden="true" tabindex="-1"></a><span class="in">EDI_2_Connor-Black-Macdowall</span></span>
<span id="cb83-649"><a href="#cb83-649" aria-hidden="true" tabindex="-1"></a><span class="in">EDI_3_Mhairi</span></span>
<span id="cb83-650"><a href="#cb83-650" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-651"><a href="#cb83-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-652"><a href="#cb83-652" aria-hidden="true" tabindex="-1"></a>This is helpful, because when you separate by underscore, you'll have something tidy</span>
<span id="cb83-653"><a href="#cb83-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-654"><a href="#cb83-654" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb83-655"><a href="#cb83-655" aria-hidden="true" tabindex="-1"></a><span class="in">EDI    1    Stuart-Duddingston</span></span>
<span id="cb83-656"><a href="#cb83-656" aria-hidden="true" tabindex="-1"></a><span class="in">EDI    2    Connor-Black-Macdowall</span></span>
<span id="cb83-657"><a href="#cb83-657" aria-hidden="true" tabindex="-1"></a><span class="in">EDI    3    Mhairi</span></span>
<span id="cb83-658"><a href="#cb83-658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-659"><a href="#cb83-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-660"><a href="#cb83-660" aria-hidden="true" tabindex="-1"></a>If you used <span class="in">`-`</span> for everything, you'll have chaos when you try to separate them because some speakers have "double barreled" names, and some speakers have only first names:</span>
<span id="cb83-661"><a href="#cb83-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-662"><a href="#cb83-662" aria-hidden="true" tabindex="-1"></a><span class="in">```         </span></span>
<span id="cb83-663"><a href="#cb83-663" aria-hidden="true" tabindex="-1"></a><span class="in"># Input:</span></span>
<span id="cb83-664"><a href="#cb83-664" aria-hidden="true" tabindex="-1"></a><span class="in">EDI-1-Stuart-Duddingston</span></span>
<span id="cb83-665"><a href="#cb83-665" aria-hidden="true" tabindex="-1"></a><span class="in">EDI-2-Connor-Black-Macdowall</span></span>
<span id="cb83-666"><a href="#cb83-666" aria-hidden="true" tabindex="-1"></a><span class="in">EDI-3-Mhairi</span></span>
<span id="cb83-667"><a href="#cb83-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-668"><a href="#cb83-668" aria-hidden="true" tabindex="-1"></a><span class="in"># Becomes</span></span>
<span id="cb83-669"><a href="#cb83-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-670"><a href="#cb83-670" aria-hidden="true" tabindex="-1"></a><span class="in">EDI    1    Stuart    Duddingston</span></span>
<span id="cb83-671"><a href="#cb83-671" aria-hidden="true" tabindex="-1"></a><span class="in">EDI    2    Connor    Black        Macdowall</span></span>
<span id="cb83-672"><a href="#cb83-672" aria-hidden="true" tabindex="-1"></a><span class="in">EDI    3    Mhairi</span></span>
<span id="cb83-673"><a href="#cb83-673" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-674"><a href="#cb83-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-675"><a href="#cb83-675" aria-hidden="true" tabindex="-1"></a>This goes beyond R programming. You should make some decisions and stick with them for all of your data analysis, including file naming, Praat tier naming, etc.</span>
<span id="cb83-676"><a href="#cb83-676" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-677"><a href="#cb83-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-678"><a href="#cb83-678" aria-hidden="true" tabindex="-1"></a><span class="fu">## Spreading columns</span></span>
<span id="cb83-679"><a href="#cb83-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-680"><a href="#cb83-680" aria-hidden="true" tabindex="-1"></a>We've got one last step, which is spreading the values in some rows across the column space. With the <span class="in">`fruit`</span> data, we might not want a column called <span class="in">`behavior`</span>, but actually have two columns called <span class="in">`bought`</span> and <span class="in">`ate`</span>. For the vowel data, we definitely don't want one column called <span class="in">`formant`</span>. We want one called <span class="in">`F1`</span> and one called <span class="in">`F2`</span>. We can do this with the <span class="in">`spread()`</span> function.</span>
<span id="cb83-681"><a href="#cb83-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-682"><a href="#cb83-682" aria-hidden="true" tabindex="-1"></a>::: illustrate</span>
<span id="cb83-683"><a href="#cb83-683" aria-hidden="true" tabindex="-1"></a>spread(<span class="co">[</span><span class="ot">data</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">key</span><span class="co">]</span>{.pop}, <span class="co">[</span><span class="ot">value</span><span class="co">]</span>{.pop})</span>
<span id="cb83-684"><a href="#cb83-684" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb83-685"><a href="#cb83-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-686"><a href="#cb83-686" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`data`</span></span>
<span id="cb83-687"><a href="#cb83-687" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Again, the data we want to work with.</span>
<span id="cb83-688"><a href="#cb83-688" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`key`</span></span>
<span id="cb83-689"><a href="#cb83-689" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The column whose values you want to spread across the column space.</span>
<span id="cb83-690"><a href="#cb83-690" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`value`</span></span>
<span id="cb83-691"><a href="#cb83-691" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The column with values that you want to fill in the cells.</span>
<span id="cb83-692"><a href="#cb83-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-693"><a href="#cb83-693" aria-hidden="true" tabindex="-1"></a>Here's how that looks with the <span class="in">`fruit_separate`</span> data.</span>
<span id="cb83-694"><a href="#cb83-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-697"><a href="#cb83-697" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-698"><a href="#cb83-698" aria-hidden="true" tabindex="-1"></a>fruit_spread <span class="ot">&lt;-</span> <span class="fu">spread</span>(<span class="at">data =</span> fruit_separate,</span>
<span id="cb83-699"><a href="#cb83-699" aria-hidden="true" tabindex="-1"></a>                       <span class="at">key =</span> behavior,</span>
<span id="cb83-700"><a href="#cb83-700" aria-hidden="true" tabindex="-1"></a>                       <span class="at">value =</span> number)</span>
<span id="cb83-701"><a href="#cb83-701" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-702"><a href="#cb83-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-703"><a href="#cb83-703" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = F, results = 'asis'}</span></span>
<span id="cb83-704"><a href="#cb83-704" aria-hidden="true" tabindex="-1"></a><span class="in">kable(fruit_spread)</span></span>
<span id="cb83-705"><a href="#cb83-705" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-706"><a href="#cb83-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-707"><a href="#cb83-707" aria-hidden="true" tabindex="-1"></a>This has created a new data frame. I told <span class="in">`spread()`</span> to spread the values in <span class="in">`behavior`</span> across the column space. Because it had only two unique values in it (<span class="in">`bought`</span> and <span class="in">`ate`</span>), it has created two new columns called <span class="in">`bought`</span> and <span class="in">`ate`</span>. After creating these new columns, it had to fill in the new cells with some values, and I told it to use the values in <span class="in">`number`</span> for that.</span>
<span id="cb83-708"><a href="#cb83-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-709"><a href="#cb83-709" aria-hidden="true" tabindex="-1"></a>Here's how that works with <span class="in">`iy_ah_step2`</span>.</span>
<span id="cb83-710"><a href="#cb83-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-713"><a href="#cb83-713" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-714"><a href="#cb83-714" aria-hidden="true" tabindex="-1"></a>iy_ah_step3 <span class="ot">&lt;-</span> <span class="fu">spread</span>(<span class="at">data =</span> iy_ah_step2,</span>
<span id="cb83-715"><a href="#cb83-715" aria-hidden="true" tabindex="-1"></a>                      <span class="at">key =</span> formant,</span>
<span id="cb83-716"><a href="#cb83-716" aria-hidden="true" tabindex="-1"></a>                      <span class="at">value =</span> hz)</span>
<span id="cb83-717"><a href="#cb83-717" aria-hidden="true" tabindex="-1"></a>iy_ah_step3</span>
<span id="cb83-718"><a href="#cb83-718" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-719"><a href="#cb83-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-720"><a href="#cb83-720" aria-hidden="true" tabindex="-1"></a>Now, we've finally gotten to a tidy data format. In our next meeting, we'll discuss how to chain these three functions into one easy to read process.</span>
<span id="cb83-721"><a href="#cb83-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-722"><a href="#cb83-722" aria-hidden="true" tabindex="-1"></a>::: {.box .idiom}</span>
<span id="cb83-723"><a href="#cb83-723" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Idiom</span><span class="co">]</span>{.label}</span>
<span id="cb83-724"><a href="#cb83-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-725"><a href="#cb83-725" aria-hidden="true" tabindex="-1"></a>You might have noticed that in the functions above, I've put a new line between individual function arguments. I've done this because white-space doesn't matter when it comes to R. I could have written these with just spaces between each argument, but that would be too visually crowded.</span>
<span id="cb83-726"><a href="#cb83-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-729"><a href="#cb83-729" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb83-730"><a href="#cb83-730" aria-hidden="true" tabindex="-1"></a><span class="co"># compare</span></span>
<span id="cb83-731"><a href="#cb83-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-732"><a href="#cb83-732" aria-hidden="true" tabindex="-1"></a><span class="co"># One line</span></span>
<span id="cb83-733"><a href="#cb83-733" aria-hidden="true" tabindex="-1"></a>fruit_separate <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> fruit_long, <span class="at">col =</span> fruit_behavior, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"fruit"</span>, <span class="st">"behavior"</span>), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb83-734"><a href="#cb83-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-735"><a href="#cb83-735" aria-hidden="true" tabindex="-1"></a><span class="co"># New Lines</span></span>
<span id="cb83-736"><a href="#cb83-736" aria-hidden="true" tabindex="-1"></a>fruit_separate <span class="ot">&lt;-</span> <span class="fu">separate</span>(<span class="at">data =</span> fruit_long, </span>
<span id="cb83-737"><a href="#cb83-737" aria-hidden="true" tabindex="-1"></a>                           <span class="at">col =</span> fruit_behavior, </span>
<span id="cb83-738"><a href="#cb83-738" aria-hidden="true" tabindex="-1"></a>                           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"fruit"</span>, <span class="st">"behavior"</span>), </span>
<span id="cb83-739"><a href="#cb83-739" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb83-740"><a href="#cb83-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-741"><a href="#cb83-741" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb83-742"><a href="#cb83-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-743"><a href="#cb83-743" aria-hidden="true" tabindex="-1"></a>I encourage you to use new lines similarly to give yourself "some space to breathe". Don't be shy about it. But, if you put newlines between *some* arguments, you should really put new lines between *all* arguments.</span>
<span id="cb83-744"><a href="#cb83-744" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




<script src="../../../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>